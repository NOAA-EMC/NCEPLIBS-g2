<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCEPLIBS-g2: addfield.f File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NCEPLIBS-g2
   &#160;<span id="projectnumber">3.4.7</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('addfield_8f.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">addfield.f File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Pack up Sections 4 through 7 for a given field and add them to a GRIB2 message.  
<a href="#details">More...</a></p>

<p><a href="addfield_8f_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:abe47d00e9129168f66617de9260d91e2"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="addfield_8f.html#abe47d00e9129168f66617de9260d91e2">addfield</a> (cgrib, lcgrib, ipdsnum, ipdstmpl, ipdstmplen, coordlist, numcoord, idrsnum, idrstmpl, idrstmplen, fld, ngrdpts, ibmap, bmap, ierr)</td></tr>
<tr class="memdesc:abe47d00e9129168f66617de9260d91e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack up Sections 4 through 7 for a given field and add them to a GRIB2 message.  <a href="addfield_8f.html#abe47d00e9129168f66617de9260d91e2">More...</a><br /></td></tr>
<tr class="separator:abe47d00e9129168f66617de9260d91e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Pack up Sections 4 through 7 for a given field and add them to a GRIB2 message. </p>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2000-05-02 </dd></dl>

<p class="definition">Definition in file <a class="el" href="addfield_8f_source.html">addfield.f</a>.</p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="abe47d00e9129168f66617de9260d91e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe47d00e9129168f66617de9260d91e2">&#9670;&nbsp;</a></span>addfield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine addfield </td>
          <td>(</td>
          <td class="paramtype">character(len=1), dimension(lcgrib), intent(inout)&#160;</td>
          <td class="paramname"><em>cgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lcgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ipdsnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*), intent(in)&#160;</td>
          <td class="paramname"><em>ipdstmpl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ipdstmplen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(numcoord), intent(in)&#160;</td>
          <td class="paramname"><em>coordlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>numcoord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>idrsnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*), intent(inout)&#160;</td>
          <td class="paramname"><em>idrstmpl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>idrstmplen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(ngrdpts), intent(in), target&#160;</td>
          <td class="paramname"><em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ngrdpts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ibmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical*1, dimension(ngrdpts), intent(in)&#160;</td>
          <td class="paramname"><em>bmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>ierr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pack up Sections 4 through 7 for a given field and add them to a GRIB2 message. </p>
<p>They are the Product Definition Section, Data Representation Section, Bit-Map Section and Data Sections.</p>
<p>This routine is used with routines <a class="el" href="gribcreate_8F90.html#a1b722f74a2a9d7c2e4612f7780d64f31" title="This subroutine initializes a new GRIB2 message and packs GRIB2 sections 0 (Indicator Section) and 1 ...">gribcreate()</a>, <a class="el" href="addlocal_8F90.html#a176884ec84d6c5f9d99f6ce1b9707eff" title="Add a Local Use Section (Section 2) to a GRIB2 message.">addlocal()</a>, <a class="el" href="addgrid_8F90.html#a0550b62ab5fac8de78235d0c77c49c21" title="Add a Grid Definition Section (Section 3) to a GRIB2 message.">addgrid()</a>, and <a class="el" href="gribend_8F90.html#acb8e7c48285d0121896b0341d9aed8e9" title="Finalize a GRIB2 message after all grids and fields have been added.">gribend()</a> to create a complete GRIB2 message. Subroutine <a class="el" href="gribcreate_8F90.html#a1b722f74a2a9d7c2e4612f7780d64f31" title="This subroutine initializes a new GRIB2 message and packs GRIB2 sections 0 (Indicator Section) and 1 ...">gribcreate()</a> must be called first to initialize a new GRIB2 message. Subroutine <a class="el" href="addgrid_8F90.html#a0550b62ab5fac8de78235d0c77c49c21" title="Add a Grid Definition Section (Section 3) to a GRIB2 message.">addgrid()</a> must be called after <a class="el" href="gribcreate_8F90.html#a1b722f74a2a9d7c2e4612f7780d64f31" title="This subroutine initializes a new GRIB2 message and packs GRIB2 sections 0 (Indicator Section) and 1 ...">gribcreate()</a> and before this routine to add the appropriate grid description to the GRIB2 message. A call to <a class="el" href="gribend_8F90.html#acb8e7c48285d0121896b0341d9aed8e9" title="Finalize a GRIB2 message after all grids and fields have been added.">gribend()</a> is required to complete GRIB2 message after all fields have been added.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">cgrib</td><td>Character array to contain the GRIB2 message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lcgrib</td><td>Maximum length (bytes) of array cgrib. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ipdsnum</td><td>Product Definition Template Number (see <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table4-0.shtml">Code Table 4.0</a>). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ipdstmpl</td><td>Contains the data values for the Product Definition Template specified by ipdsnum. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ipdstmplen</td><td>Max dimension of ipdstmpl. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">coordlist</td><td>Array containg floating point values intended to document the vertical discretisation associated to model data on hybrid coordinate vertical levels (part of Section 4). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">numcoord</td><td>- number of values in array coordlist. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idrsnum</td><td>- Data Representation Template Number (see <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table5-0.shtml">Code Table 5.0</a>). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idrstmpl</td><td>Contains the data values for the Data Representation Template specified by idrsnum. Note that some values in this template (eg. reference values, number of bits, etc...) may be changed by the data packing algorithms. Use this to specify scaling factors and order of spatial differencing, if desired. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idrstmplen</td><td>Max dimension of idrstmpl. This must be at least as large as the length of the selected PDS template. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fld</td><td>Array of data points to pack. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ngrdpts</td><td>Number of data points in grid. i.e. size of fld and bmap. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ibmap</td><td>Bitmap indicator (see <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table6-0.shtml">Code Table 6.0</a>).<ul>
<li>0 bitmap applies and is included in Section 6.</li>
<li>1-253 Predefined bitmap applies</li>
<li>254 Previously defined bitmap applies to this field</li>
<li>255 Bit map does not apply to this product. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">bmap</td><td>Logical*1 array containing bitmap to be added (if ibmap=0 or ibmap=254). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ierr</td><td>Error return code.<ul>
<li>0 no error.</li>
<li>1 GRIB message was not initialized. Need to call routine gribcreate first.</li>
<li>2 GRIB message already complete. Cannot add new section.</li>
<li>3 Sum of Section byte counts does not add to total byte count.</li>
<li>4 Previous Section was not 3 or 7.</li>
<li>5 Could not find requested Product Definition Template.</li>
<li>6 Section 3 (GDS) not previously defined in message.</li>
<li>7 Tried to use unsupported Data Representationi Template.</li>
<li>8 Specified use of a previously defined bitmap, but one does not exist in the GRIB message.</li>
<li>9 GDT of one of 5.50 through 5.53 required to pack using DRT 5.51.</li>
<li>10 Error packing data field.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2000-05-02 </dd></dl>

<p class="definition">Definition at line <a class="el" href="addfield_8f_source.html#l00072">72</a> of file <a class="el" href="addfield_8f_source.html">addfield.f</a>.</p>

<p class="reference">References <a class="el" href="cmplxpack_8f_source.html#l00038">cmplxpack()</a>, <a class="el" href="pdstemplates_8F90_source.html#l00431">pdstemplates::extpdstemplate()</a>, <a class="el" href="g2__gbytesc_8F90_source.html#l00020">g2_gbytec()</a>, <a class="el" href="g2__gbytesc_8F90_source.html#l00042">g2_sbytec()</a>, <a class="el" href="g2__gbytesc_8F90_source.html#l00120">g2_sbytesc()</a>, <a class="el" href="getdim_8f_source.html#l00022">getdim()</a>, <a class="el" href="drstemplates_8F90_source.html#l00157">drstemplates::getdrstemplate()</a>, <a class="el" href="pdstemplates_8F90_source.html#l00391">pdstemplates::getpdstemplate()</a>, <a class="el" href="getpoly_8f_source.html#l00021">getpoly()</a>, <a class="el" href="jpcpack_8F90_source.html#l00032">jpcpack()</a>, <a class="el" href="mkieee_8F90_source.html#l00014">mkieee()</a>, <a class="el" href="pngpack_8F90_source.html#l00029">pngpack()</a>, <a class="el" href="simpack_8f_source.html#l00026">simpack()</a>, and <a class="el" href="specpack_8F90_source.html#l00022">specpack()</a>.</p>

<p class="reference">Referenced by <a class="el" href="putgb2_8F90_source.html#l00041">putgb2()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="addfield_8f.html">addfield.f</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
