<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCEPLIBS-g2: g2gf.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NCEPLIBS-g2
   &#160;<span id="projectnumber">3.4.9</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('g2gf_8F90.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">g2gf.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Subroutines to write and get a field and free memmory from <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>.  
<a href="#details">More...</a></p>

<p><a href="g2gf_8F90_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a027efd02c99c9464153fc76d9bb9627e"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2gf_8F90.html#a027efd02c99c9464153fc76d9bb9627e">gf_free</a> (gfld)</td></tr>
<tr class="memdesc:a027efd02c99c9464153fc76d9bb9627e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free memory that was used to store array values in derived type <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>.  <a href="g2gf_8F90.html#a027efd02c99c9464153fc76d9bb9627e">More...</a><br /></td></tr>
<tr class="separator:a027efd02c99c9464153fc76d9bb9627e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c05a5dbc390b360c3e91e252260b9d"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2gf_8F90.html#ad4c05a5dbc390b360c3e91e252260b9d">gf_getfld</a> (cgrib, lcgrib, ifldnum, unpack, expand, gfld, ierr)</td></tr>
<tr class="memdesc:ad4c05a5dbc390b360c3e91e252260b9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the Grid Definition, and Product Definition for a given data field.  <a href="g2gf_8F90.html#ad4c05a5dbc390b360c3e91e252260b9d">More...</a><br /></td></tr>
<tr class="separator:ad4c05a5dbc390b360c3e91e252260b9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a81776bba301f9f8af1aa1e619d0428"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2gf_8F90.html#a9a81776bba301f9f8af1aa1e619d0428">putgb2</a> (lugb, gfld, iret)</td></tr>
<tr class="memdesc:a9a81776bba301f9f8af1aa1e619d0428"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack a field into a grib2 message and write that message to a file.  <a href="g2gf_8F90.html#a9a81776bba301f9f8af1aa1e619d0428">More...</a><br /></td></tr>
<tr class="separator:a9a81776bba301f9f8af1aa1e619d0428"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Subroutines to write and get a field and free memmory from <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>. </p>
<dl class="section author"><dt>Author</dt><dd>Edward Hartnett </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Mar 6, 2024 </dd></dl>

<p class="definition">Definition in file <a class="el" href="g2gf_8F90_source.html">g2gf.F90</a>.</p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a027efd02c99c9464153fc76d9bb9627e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a027efd02c99c9464153fc76d9bb9627e">&#9670;&nbsp;</a></span>gf_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gf_free </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">gribfield</a>)&#160;</td>
          <td class="paramname"><em>gfld</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free memory that was used to store array values in derived type <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gfld</td><td>derived type <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2000-05-26 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2gf_8F90_source.html#l00584">584</a> of file <a class="el" href="g2gf_8F90_source.html">g2gf.F90</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2getgb2_8F90_source.html#l00193">getgb2i2()</a>, <a class="el" href="g2getgb2_8F90_source.html#l00512">getgb2p()</a>, and <a class="el" href="g2gf_8F90_source.html#l00211">gf_getfld()</a>.</p>

</div>
</div>
<a id="ad4c05a5dbc390b360c3e91e252260b9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4c05a5dbc390b360c3e91e252260b9d">&#9670;&nbsp;</a></span>gf_getfld()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gf_getfld </td>
          <td>(</td>
          <td class="paramtype">character(len = 1), dimension(lcgrib), intent(in)&#160;</td>
          <td class="paramname"><em>cgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lcgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ifldnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>unpack</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>expand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">gribfield</a>), intent(out)&#160;</td>
          <td class="paramname"><em>gfld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>ierr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the Grid Definition, and Product Definition for a given data field. </p>
<p>All of the information returned is stored in a derived type variable, gfld. Gfld is of type <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>, which is defined in <a class="el" href="gribmod_8F90.html" title="This Fortran module contains the declaration of derived type gribfield.">gribmod.F90</a>; users of this routine will need to include the line "USE GRIB_MOD" in their calling routine.</p>
<p>Since there can be multiple data fields packed into a GRIB2 message, the calling routine indicates which field is being requested with the ifldnum argument.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cgrib</td><td>Character array that contains the GRIB2 message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lcgrib</td><td>Length (in bytes) of GRIB message array cgrib. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ifldnum</td><td>Specifies which field in the GRIB2 message to return. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">unpack</td><td>Logical value indicating whether to unpack bitmap/data. .true. = unpack bitmap and data values; .false. = do not unpack bitmap and data values. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">expand</td><td>Boolean value indicating whether the data points should be expanded to the correspond grid, if a bit-map is present.<ul>
<li>1 if possible, expand data field to grid, inserting zero values at gridpoints that are bitmapped out.</li>
<li>0 do not expand data field, leaving it an array of consecutive data points for each "1" in the bitmap. This argument is ignored if unpack == 0 OR if the returned field does not contain a bit-map. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">gfld</td><td>derived type <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ierr</td><td>Error return code.<ul>
<li>0 no error.</li>
<li>1 Beginning characters "GRIB" not found.</li>
<li>2 GRIB message is not Edition 2.</li>
<li>3 The data field request number was not positive.</li>
<li>4 End string "7777" found, but not where expected.</li>
<li>5 End string "7777" not found at end of message.</li>
<li>6 GRIB message did not contain the requested number of data fields.</li>
<li>7 End string "7777" not found at end of message.</li>
<li>9 Data Representation Template 5.NN not yet implemented.</li>
<li>10 Error unpacking Section 3.</li>
<li>11 Error unpacking Section 4.</li>
<li>12 Error unpacking Section 5.</li>
<li>13 Error unpacking Section 6.</li>
<li>14 Error unpacking Section 7.</li>
<li>17 Previous bitmap specified, but none exists.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Note that derived type <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a> contains pointers to many arrays of data. The memory for these arrays is allocated when the values in the arrays are set, to help minimize problems with array overloading. Because of this users should free this memory, when it is no longer needed, by a call to subroutine <a class="el" href="g2gf_8F90.html#a027efd02c99c9464153fc76d9bb9627e" title="Free memory that was used to store array values in derived type grib_mod::gribfield.">gf_free()</a>. Subroutine <a class="el" href="g2get_8F90.html#a56f9a0b651490e6240eb18fc12754e17" title="Find the number of gridded fields and Local Use Sections in a GRIB2 message.">gb_info()</a> can be used to first determine how many data fields exist in a given GRIB message.</dd></dl>
<p>It may not always be possible to expand a bit-mapped data field. If a pre-defined bit-map is used and not included in the GRIB2 message itself, this routine would not have the necessary information to expand the data. In this case, gfld%expanded would be set to 0 (false), regardless of the value of input argument expand.</p>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2000-05-26 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2gf_8F90_source.html#l00210">210</a> of file <a class="el" href="g2gf_8F90_source.html">g2gf.F90</a>.</p>

<p class="reference">References <a class="el" href="g2bytes_8F90_source.html#l00021">g2_gbytec()</a>, <a class="el" href="g2gf_8F90_source.html#l00585">gf_free()</a>, <a class="el" href="g2unpack_8F90_source.html#l00042">gf_unpack1()</a>, <a class="el" href="g2unpack_8F90_source.html#l00100">gf_unpack2()</a>, <a class="el" href="g2unpack_8F90_source.html#l00184">gf_unpack3()</a>, <a class="el" href="g2unpack_8F90_source.html#l00334">gf_unpack4()</a>, <a class="el" href="g2unpack_8F90_source.html#l00467">gf_unpack5()</a>, <a class="el" href="g2unpack_8F90_source.html#l00576">gf_unpack6()</a>, and <a class="el" href="g2unpack_8F90_source.html#l00650">gf_unpack7()</a>.</p>

</div>
</div>
<a id="a9a81776bba301f9f8af1aa1e619d0428"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a81776bba301f9f8af1aa1e619d0428">&#9670;&nbsp;</a></span>putgb2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine putgb2 </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lugb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">gribfield</a>), intent(in)&#160;</td>
          <td class="paramname"><em>gfld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>iret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pack a field into a grib2 message and write that message to a file. </p>
<p>The information to be packed into the grib field is stored in a derived type variable, gfld. gfld is of type <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>, which is defined in module <a class="el" href="namespacegrib__mod.html" title="This Fortran module contains the declaration of derived type gribfield.">grib_mod</a>, so users of this routine will need to include the line "use grib_mod" in their calling routine. Each component of the gribfield type is described in the input argument list section below.</p>
<dl class="section note"><dt>Note</dt><dd>Derived type gribfield contains pointers to many arrays of data (See <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>). The memory for these arrays is allocated when the values in the arrays are set. Users must free this memory, when it is no longer needed, by a call to subroutine <a class="el" href="g2gf_8F90.html#a027efd02c99c9464153fc76d9bb9627e" title="Free memory that was used to store array values in derived type grib_mod::gribfield.">gf_free()</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lugb</td><td>integer unit of the unblocked grib data file. File must be opened with <a href="https://noaa-emc.github.io/NCEPLIBS-bacio/">baopen() or baopenw()</a> before calling this routine. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">gfld</td><td>derived type <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iret</td><td>integer return code<ul>
<li>0 No error.</li>
<li>2 Memory allocation error.</li>
<li>10 No Section 1 info available.</li>
<li>11 No Grid Definition Template info available.</li>
<li>12 Missing some required data field info.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2002-04-22 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2gf_8F90_source.html#l00034">34</a> of file <a class="el" href="g2gf_8F90_source.html">g2gf.F90</a>.</p>

<p class="reference">References <a class="el" href="g2create_8F90_source.html#l00186">addfield()</a>, <a class="el" href="g2create_8F90_source.html#l00615">addgrid()</a>, <a class="el" href="g2create_8F90_source.html#l00800">addlocal()</a>, <a class="el" href="g2create_8F90_source.html#l00054">gribcreate()</a>, and <a class="el" href="g2create_8F90_source.html#l00906">gribend()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="g2gf_8F90.html">g2gf.F90</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
