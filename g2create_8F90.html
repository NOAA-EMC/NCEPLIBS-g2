<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCEPLIBS-g2: g2create.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NCEPLIBS-g2
   &#160;<span id="projectnumber">3.4.9</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('g2create_8F90.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">g2create.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Subroutines to create a GRIB2 message.  
<a href="#details">More...</a></p>

<p><a href="g2create_8F90_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:abe47d00e9129168f66617de9260d91e2"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2create_8F90.html#abe47d00e9129168f66617de9260d91e2">addfield</a> (cgrib, lcgrib, ipdsnum, ipdstmpl, ipdstmplen, coordlist, numcoord, idrsnum, idrstmpl, idrstmplen, fld, ngrdpts, ibmap, bmap, ierr)</td></tr>
<tr class="memdesc:abe47d00e9129168f66617de9260d91e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pack up Sections 4 through 7 for a field and add them to a GRIB2 message.  <a href="g2create_8F90.html#abe47d00e9129168f66617de9260d91e2">More...</a><br /></td></tr>
<tr class="separator:abe47d00e9129168f66617de9260d91e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0550b62ab5fac8de78235d0c77c49c21"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2create_8F90.html#a0550b62ab5fac8de78235d0c77c49c21">addgrid</a> (cgrib, lcgrib, igds, igdstmpl, igdstmplen, ideflist, idefnum, ierr)</td></tr>
<tr class="memdesc:a0550b62ab5fac8de78235d0c77c49c21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_sect3.shtml">Grid Definition Section (Section 3)</a> to a GRIB2 message.  <a href="g2create_8F90.html#a0550b62ab5fac8de78235d0c77c49c21">More...</a><br /></td></tr>
<tr class="separator:a0550b62ab5fac8de78235d0c77c49c21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a176884ec84d6c5f9d99f6ce1b9707eff"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2create_8F90.html#a176884ec84d6c5f9d99f6ce1b9707eff">addlocal</a> (cgrib, lcgrib, csec2, lcsec2, ierr)</td></tr>
<tr class="memdesc:a176884ec84d6c5f9d99f6ce1b9707eff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_sect2.shtml">Local Use Section (Section 2)</a> to a GRIB2 message.  <a href="g2create_8F90.html#a176884ec84d6c5f9d99f6ce1b9707eff">More...</a><br /></td></tr>
<tr class="separator:a176884ec84d6c5f9d99f6ce1b9707eff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b722f74a2a9d7c2e4612f7780d64f31"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2create_8F90.html#a1b722f74a2a9d7c2e4612f7780d64f31">gribcreate</a> (cgrib, lcgrib, listsec0, listsec1, ierr)</td></tr>
<tr class="memdesc:a1b722f74a2a9d7c2e4612f7780d64f31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize a new GRIB2 message and pack GRIB2 sections 0 (Indicator) and 1 (Identification).  <a href="g2create_8F90.html#a1b722f74a2a9d7c2e4612f7780d64f31">More...</a><br /></td></tr>
<tr class="separator:a1b722f74a2a9d7c2e4612f7780d64f31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb8e7c48285d0121896b0341d9aed8e9"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2create_8F90.html#acb8e7c48285d0121896b0341d9aed8e9">gribend</a> (cgrib, lcgrib, lengrib, ierr)</td></tr>
<tr class="memdesc:acb8e7c48285d0121896b0341d9aed8e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize a GRIB2 message after all grids and fields have been added.  <a href="g2create_8F90.html#acb8e7c48285d0121896b0341d9aed8e9">More...</a><br /></td></tr>
<tr class="separator:acb8e7c48285d0121896b0341d9aed8e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Subroutines to create a GRIB2 message. </p>
<dl class="section author"><dt>Author</dt><dd>Ed Hartnett </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Mar 5, 2024 </dd></dl>

<p class="definition">Definition in file <a class="el" href="g2create_8F90_source.html">g2create.F90</a>.</p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="abe47d00e9129168f66617de9260d91e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe47d00e9129168f66617de9260d91e2">&#9670;&nbsp;</a></span>addfield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine addfield </td>
          <td>(</td>
          <td class="paramtype">character(len=1), dimension(lcgrib), intent(inout)&#160;</td>
          <td class="paramname"><em>cgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lcgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ipdsnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*), intent(in)&#160;</td>
          <td class="paramname"><em>ipdstmpl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ipdstmplen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(numcoord), intent(in)&#160;</td>
          <td class="paramname"><em>coordlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>numcoord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>idrsnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*), intent(inout)&#160;</td>
          <td class="paramname"><em>idrstmpl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>idrstmplen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(ngrdpts), intent(in), target&#160;</td>
          <td class="paramname"><em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ngrdpts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ibmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical*1, dimension(ngrdpts), intent(in)&#160;</td>
          <td class="paramname"><em>bmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>ierr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pack up Sections 4 through 7 for a field and add them to a GRIB2 message. </p>
<p>They are the Product Definition Section, Data Representation Section, Bit-Map Section and Data Sections.</p>
<p>This routine is used with routines <a class="el" href="g2create_8F90.html#a1b722f74a2a9d7c2e4612f7780d64f31" title="Initialize a new GRIB2 message and pack GRIB2 sections 0 (Indicator) and 1 (Identification).">gribcreate()</a>, <a class="el" href="g2create_8F90.html#a176884ec84d6c5f9d99f6ce1b9707eff" title="Add a Local Use Section (Section 2) to a GRIB2 message.">addlocal()</a>, <a class="el" href="g2create_8F90.html#a0550b62ab5fac8de78235d0c77c49c21" title="Add a Grid Definition Section (Section 3) to a GRIB2 message.">addgrid()</a>, and <a class="el" href="g2create_8F90.html#acb8e7c48285d0121896b0341d9aed8e9" title="Finalize a GRIB2 message after all grids and fields have been added.">gribend()</a> to create a complete GRIB2 message. Subroutine <a class="el" href="g2create_8F90.html#a1b722f74a2a9d7c2e4612f7780d64f31" title="Initialize a new GRIB2 message and pack GRIB2 sections 0 (Indicator) and 1 (Identification).">gribcreate()</a> must be called first to initialize a new GRIB2 message. Subroutine <a class="el" href="g2create_8F90.html#a0550b62ab5fac8de78235d0c77c49c21" title="Add a Grid Definition Section (Section 3) to a GRIB2 message.">addgrid()</a> must be called after <a class="el" href="g2create_8F90.html#a1b722f74a2a9d7c2e4612f7780d64f31" title="Initialize a new GRIB2 message and pack GRIB2 sections 0 (Indicator) and 1 (Identification).">gribcreate()</a> and before this routine to add the appropriate grid description to the GRIB2 message. A call to <a class="el" href="g2create_8F90.html#acb8e7c48285d0121896b0341d9aed8e9" title="Finalize a GRIB2 message after all grids and fields have been added.">gribend()</a> is required to complete GRIB2 message after all fields have been added.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">cgrib</td><td>Character array to contain the GRIB2 message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lcgrib</td><td>Maximum length (bytes) of array cgrib. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ipdsnum</td><td>Product Definition Template Number (see <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table4-0.shtml">Code Table 4.0</a>). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ipdstmpl</td><td>Contains the data values for the Product Definition Template specified by ipdsnum. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ipdstmplen</td><td>Max dimension of ipdstmpl. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">coordlist</td><td>Array containg floating point values intended to document the vertical discretisation associated to model data on hybrid coordinate vertical levels (part of Section 4). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">numcoord</td><td>- number of values in array coordlist. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idrsnum</td><td>- Data Representation Template Number (see <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table5-0.shtml">Code Table 5.0</a>). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idrstmpl</td><td>Contains the data values for the Data Representation Template specified by idrsnum. Note that some values in this template (eg. reference values, number of bits, etc...) may be changed by the data packing algorithms. Use this to specify scaling factors and order of spatial differencing, if desired. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idrstmplen</td><td>Max dimension of idrstmpl. This must be at least as large as the length of the selected PDS template. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fld</td><td>Array of data points to pack. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ngrdpts</td><td>Number of data points in grid. i.e. size of fld and bmap. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ibmap</td><td>Bitmap indicator (see <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table6-0.shtml">Code Table 6.0</a>).<ul>
<li>0 bitmap applies and is included in Section 6.</li>
<li>1-253 Predefined bitmap applies</li>
<li>254 Previously defined bitmap applies to this field</li>
<li>255 Bit map does not apply to this product. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">bmap</td><td>Logical*1 array containing bitmap to be added (if ibmap=0 or ibmap=254). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ierr</td><td>Error return code.<ul>
<li>0 no error.</li>
<li>1 GRIB message was not initialized. Need to call routine gribcreate first.</li>
<li>2 GRIB message already complete. Cannot add new section.</li>
<li>3 Sum of Section byte counts does not add to total byte count.</li>
<li>4 Previous Section was not 3 or 7.</li>
<li>5 Could not find requested Product Definition Template.</li>
<li>6 Section 3 (GDS) not previously defined in message.</li>
<li>7 Tried to use unsupported Data Representationi Template.</li>
<li>8 Specified use of a previously defined bitmap, but one does not exist in the GRIB message.</li>
<li>9 GDT of one of 5.50 through 5.53 required to pack using DRT 5.51.</li>
<li>10 Error packing data field.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2000-05-02 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2create_8F90_source.html#l00183">183</a> of file <a class="el" href="g2create_8F90_source.html">g2create.F90</a>.</p>

<p class="reference">References <a class="el" href="compack_8F90_source.html#l00043">cmplxpack()</a>, <a class="el" href="pdstemplates_8F90_source.html#l00431">pdstemplates::extpdstemplate()</a>, <a class="el" href="g2bytes_8F90_source.html#l00021">g2_gbytec()</a>, <a class="el" href="g2bytes_8F90_source.html#l00238">g2_sbytec()</a>, <a class="el" href="g2bytes_8F90_source.html#l00308">g2_sbytesc()</a>, <a class="el" href="g2bytes_8F90_source.html#l00282">g2_sbytescr()</a>, <a class="el" href="g2get_8F90_source.html#l01162">getdim()</a>, <a class="el" href="drstemplates_8F90_source.html#l00157">drstemplates::getdrstemplate()</a>, <a class="el" href="pdstemplates_8F90_source.html#l00391">pdstemplates::getpdstemplate()</a>, <a class="el" href="g2get_8F90_source.html#l01389">getpoly()</a>, <a class="el" href="g2jpc_8F90_source.html#l00035">jpcpack()</a>, <a class="el" href="g2bytes_8F90_source.html#l00540">mkieee()</a>, <a class="el" href="g2png_8F90_source.html#l00034">pngpack()</a>, <a class="el" href="g2sim_8F90_source.html#l00027">simpack()</a>, and <a class="el" href="g2spec_8F90_source.html#l00025">specpack()</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2gf_8F90_source.html#l00035">putgb2()</a>.</p>

</div>
</div>
<a id="a0550b62ab5fac8de78235d0c77c49c21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0550b62ab5fac8de78235d0c77c49c21">&#9670;&nbsp;</a></span>addgrid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine addgrid </td>
          <td>(</td>
          <td class="paramtype">character(len = 1), dimension(lcgrib), intent(inout)&#160;</td>
          <td class="paramname"><em>cgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lcgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*), intent(in)&#160;</td>
          <td class="paramname"><em>igds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*), intent(in)&#160;</td>
          <td class="paramname"><em>igdstmpl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>igdstmplen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(idefnum), intent(in)&#160;</td>
          <td class="paramname"><em>ideflist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>idefnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>ierr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_sect3.shtml">Grid Definition Section (Section 3)</a> to a GRIB2 message. </p>
<p>This routine is used with routines <a class="el" href="g2create_8F90.html#a1b722f74a2a9d7c2e4612f7780d64f31" title="Initialize a new GRIB2 message and pack GRIB2 sections 0 (Indicator) and 1 (Identification).">gribcreate()</a>, <a class="el" href="g2create_8F90.html#a176884ec84d6c5f9d99f6ce1b9707eff" title="Add a Local Use Section (Section 2) to a GRIB2 message.">addlocal()</a>, <a class="el" href="g2create_8F90.html#abe47d00e9129168f66617de9260d91e2" title="Pack up Sections 4 through 7 for a field and add them to a GRIB2 message.">addfield()</a>, and <a class="el" href="g2create_8F90.html#acb8e7c48285d0121896b0341d9aed8e9" title="Finalize a GRIB2 message after all grids and fields have been added.">gribend()</a> to create a complete GRIB2 message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">cgrib</td><td>Character array to contain the GRIB2 message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lcgrib</td><td>Maximum length (bytes) of array cgrib. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">igds</td><td>Contains information needed for GRIB Grid Definition Section 3. Must be dimensioned &gt;= 5.<ul>
<li>igds(1) Source of grid definition (see <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table3-0.shtml">Code Table 3.0</a>).</li>
<li>igds(2) Number of grid points in the defined grid.</li>
<li>igds(3) Number of octets needed for each additional grid points definition. Used to define number of points in each row (or column) for non-regular grids. = 0, if using regular grid.</li>
<li>igds(4) Interpretation of list for optional points definition. (See <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table3-11.shtml">Code Table 3.11</a>).</li>
<li>igds(5) Grid Definition Template Number (See <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table3-1.shtml">Code Table 3.1</a>). </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">igdstmpl</td><td>Contains the data values for the Grid Definition Template specified by igds(5). This should have the length of mapgridlen of the selected grid template. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">igdstmplen</td><td>Max dimension of igdstmpl. This must be at least as large as the mapgridlen of the chosen template. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ideflist</td><td>(Used if igds(3) .ne. 0). This array contains the number of grid points contained in each row (or column). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idefnum</td><td>The number of entries in array ideflist. This is the number of rows (or columns) for which optional grid points are defined. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ierr</td><td>Error return code.<ul>
<li>0 no error.</li>
<li>1 GRIB message was not initialized. Need to call routine gribcreate first.</li>
<li>2 GRIB message already complete. Cannot add new section.</li>
<li>3 Sum of Section byte counts doesn't add to total byte count.</li>
<li>4 Previous Section was not 1, 2 or 7.</li>
<li>5 Could not find requested Grid Definition Template.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2000-05-01 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2create_8F90_source.html#l00613">613</a> of file <a class="el" href="g2create_8F90_source.html">g2create.F90</a>.</p>

<p class="reference">References <a class="el" href="gridtemplates_8F90_source.html#l00333">gridtemplates::extgridtemplate()</a>, <a class="el" href="g2bytes_8F90_source.html#l00021">g2_gbytec()</a>, <a class="el" href="g2bytes_8F90_source.html#l00238">g2_sbytec()</a>, <a class="el" href="g2bytes_8F90_source.html#l00308">g2_sbytesc()</a>, and <a class="el" href="gridtemplates_8F90_source.html#l00292">gridtemplates::getgridtemplate()</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2gf_8F90_source.html#l00035">putgb2()</a>.</p>

</div>
</div>
<a id="a176884ec84d6c5f9d99f6ce1b9707eff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a176884ec84d6c5f9d99f6ce1b9707eff">&#9670;&nbsp;</a></span>addlocal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine addlocal </td>
          <td>(</td>
          <td class="paramtype">character(len = 1), dimension(lcgrib), intent(inout)&#160;</td>
          <td class="paramname"><em>cgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lcgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len = 1), dimension(lcsec2), intent(in)&#160;</td>
          <td class="paramname"><em>csec2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lcsec2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>ierr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_sect2.shtml">Local Use Section (Section 2)</a> to a GRIB2 message. </p>
<p>This routine is used with routines <a class="el" href="g2create_8F90.html#a1b722f74a2a9d7c2e4612f7780d64f31" title="Initialize a new GRIB2 message and pack GRIB2 sections 0 (Indicator) and 1 (Identification).">gribcreate()</a>, <a class="el" href="g2create_8F90.html#a176884ec84d6c5f9d99f6ce1b9707eff" title="Add a Local Use Section (Section 2) to a GRIB2 message.">addlocal()</a>, <a class="el" href="g2create_8F90.html#abe47d00e9129168f66617de9260d91e2" title="Pack up Sections 4 through 7 for a field and add them to a GRIB2 message.">addfield()</a>, and <a class="el" href="g2create_8F90.html#acb8e7c48285d0121896b0341d9aed8e9" title="Finalize a GRIB2 message after all grids and fields have been added.">gribend()</a> to create a complete GRIB2 message. Subroutine gribcreate must be called first to initialize a new GRIB2 message.</p>
<p>The Local Use Section (Section 2) can only follow Section 1 or Section 7 in a GRIB2 message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">cgrib</td><td>Character array to contain the GRIB2 message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lcgrib</td><td>Maximum length (bytes) of array cgrib. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">csec2</td><td>Character array containing information to be added to Section 2. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lcsec2</td><td>Number of bytes of character array csec2 to be added to Section 2. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ierr</td><td>Error return code.<ul>
<li>0 no error</li>
<li>1 GRIB message was not initialized. Need to call routine gribcreate first.</li>
<li>2 GRIB message already complete. Cannot add new section.</li>
<li>3 Sum of Section byte counts doesn't add to total byte count.</li>
<li>4 Previous Section was not 1 or 7.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2000-05-01 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2create_8F90_source.html#l00799">799</a> of file <a class="el" href="g2create_8F90_source.html">g2create.F90</a>.</p>

<p class="reference">References <a class="el" href="g2bytes_8F90_source.html#l00021">g2_gbytec()</a>, and <a class="el" href="g2bytes_8F90_source.html#l00238">g2_sbytec()</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2gf_8F90_source.html#l00035">putgb2()</a>.</p>

</div>
</div>
<a id="a1b722f74a2a9d7c2e4612f7780d64f31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b722f74a2a9d7c2e4612f7780d64f31">&#9670;&nbsp;</a></span>gribcreate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gribcreate </td>
          <td>(</td>
          <td class="paramtype">character(len = 1), dimension(lcgrib), intent(inout)&#160;</td>
          <td class="paramname"><em>cgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lcgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*), intent(in)&#160;</td>
          <td class="paramname"><em>listsec0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*), intent(in)&#160;</td>
          <td class="paramname"><em>listsec1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>ierr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize a new GRIB2 message and pack GRIB2 sections 0 (Indicator) and 1 (Identification). </p>
<p>This routine is used with routines <a class="el" href="g2create_8F90.html#a176884ec84d6c5f9d99f6ce1b9707eff" title="Add a Local Use Section (Section 2) to a GRIB2 message.">addlocal()</a>, <a class="el" href="g2create_8F90.html#a0550b62ab5fac8de78235d0c77c49c21" title="Add a Grid Definition Section (Section 3) to a GRIB2 message.">addgrid()</a>, <a class="el" href="g2create_8F90.html#abe47d00e9129168f66617de9260d91e2" title="Pack up Sections 4 through 7 for a field and add them to a GRIB2 message.">addfield()</a>, and <a class="el" href="g2create_8F90.html#acb8e7c48285d0121896b0341d9aed8e9" title="Finalize a GRIB2 message after all grids and fields have been added.">gribend()</a> to create a complete GRIB2 message. Subroutine <a class="el" href="g2create_8F90.html#a1b722f74a2a9d7c2e4612f7780d64f31" title="Initialize a new GRIB2 message and pack GRIB2 sections 0 (Indicator) and 1 (Identification).">gribcreate()</a> must be called first to initialize a new GRIB2 message. Also, a call to <a class="el" href="g2create_8F90.html#acb8e7c48285d0121896b0341d9aed8e9" title="Finalize a GRIB2 message after all grids and fields have been added.">gribend()</a> is required to complete GRIB2 message after all fields have been added.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">cgrib</td><td>Character array to contain the GRIB2 message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lcgrib</td><td>Maximum Length (in bytes) of array cgrib. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">listsec0</td><td>Contains information needed for GRIB Indicator Section 0. Must be dimensioned &gt;= 2.<ul>
<li>listsec0(1) Discipline-GRIB Master Table Number (<a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table0-0.shtml">Code Table 0.0</a>).</li>
<li>listsec0(2) GRIB Edition Number (currently 2) </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">listsec1</td><td>Contains information needed for GRIB <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_sect1.shtml">Identification Section 1</a>. Must be dimensioned &gt;= 13.<ul>
<li>listsec1(1) Id of orginating centre (<a href="https://www.nco.ncep.noaa.gov/pmb/docs/on388/table0.html">Table 0</a>).</li>
<li>listsec1(2) Id of orginating sub-centre (<a href="https://www.nco.ncep.noaa.gov/pmb/docs/on388/tablec.html">Table C</a>).</li>
<li>listsec1(3) GRIB Master Tables Version Number (<a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-0.shtml">Table 1.0</a>).</li>
<li>listsec1(4) GRIB Local Tables Version Number (<a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-1.shtml">Table 1.1</a>).</li>
<li>listsec1(5) Significance of Reference Time (<a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-1.shtml">Table 1.2</a>)</li>
<li>listsec1(6) Reference Time - Year (4 digits)</li>
<li>listsec1(7) Reference Time - Month</li>
<li>listsec1(8) Reference Time - Day</li>
<li>listsec1(9) Reference Time - Hour</li>
<li>listsec1(10) Reference Time - Minute</li>
<li>listsec1(11) Reference Time - Second</li>
<li>listsec1(12) Production status of data (<a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-3.shtml">Table 1.3</a>).</li>
<li>listsec1(13) Type of processed data (<a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-4.shtml">Table 1.4</a>). </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ierr</td><td>Error return code.<ul>
<li>0 no error</li>
<li>1 Tried to use for version other than GRIB Edition 2</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This routine is intended for use with routines <a class="el" href="g2create_8F90.html#a176884ec84d6c5f9d99f6ce1b9707eff" title="Add a Local Use Section (Section 2) to a GRIB2 message.">addlocal()</a>, <a class="el" href="g2create_8F90.html#a0550b62ab5fac8de78235d0c77c49c21" title="Add a Grid Definition Section (Section 3) to a GRIB2 message.">addgrid()</a>, <a class="el" href="g2create_8F90.html#abe47d00e9129168f66617de9260d91e2" title="Pack up Sections 4 through 7 for a field and add them to a GRIB2 message.">addfield()</a>, and <a class="el" href="g2create_8F90.html#acb8e7c48285d0121896b0341d9aed8e9" title="Finalize a GRIB2 message after all grids and fields have been added.">gribend()</a> to create a complete GRIB2 message.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2000-04-28 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2create_8F90_source.html#l00053">53</a> of file <a class="el" href="g2create_8F90_source.html">g2create.F90</a>.</p>

<p class="reference">References <a class="el" href="g2bytes_8F90_source.html#l00238">g2_sbytec()</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2gf_8F90_source.html#l00035">putgb2()</a>.</p>

</div>
</div>
<a id="acb8e7c48285d0121896b0341d9aed8e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb8e7c48285d0121896b0341d9aed8e9">&#9670;&nbsp;</a></span>gribend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gribend </td>
          <td>(</td>
          <td class="paramtype">character(len = 1), dimension(lcgrib), intent(inout)&#160;</td>
          <td class="paramname"><em>cgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lcgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>lengrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>ierr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalize a GRIB2 message after all grids and fields have been added. </p>
<p>This subroutine adds the End Section ("7777") to the end of the GRIB message and calculates the length and stores it in the appropriate place in Section 0. This routine is used with routines <a class="el" href="g2create_8F90.html#a1b722f74a2a9d7c2e4612f7780d64f31" title="Initialize a new GRIB2 message and pack GRIB2 sections 0 (Indicator) and 1 (Identification).">gribcreate()</a>, <a class="el" href="g2create_8F90.html#a176884ec84d6c5f9d99f6ce1b9707eff" title="Add a Local Use Section (Section 2) to a GRIB2 message.">addlocal()</a>, <a class="el" href="g2create_8F90.html#a0550b62ab5fac8de78235d0c77c49c21" title="Add a Grid Definition Section (Section 3) to a GRIB2 message.">addgrid()</a>, and <a class="el" href="g2create_8F90.html#abe47d00e9129168f66617de9260d91e2" title="Pack up Sections 4 through 7 for a field and add them to a GRIB2 message.">addfield()</a> to create a complete GRIB2 message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">cgrib</td><td>Character array to contain the GRIB2 message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lcgrib</td><td>Maximum Length (in bytes) of array cgrib. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">lengrib</td><td>Length of the final GRIB2 message in bytes. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ierr</td><td>Error return code.<ul>
<li>0 no error.</li>
<li>1 GRIB message was not initialized - call routine <a class="el" href="g2create_8F90.html#a1b722f74a2a9d7c2e4612f7780d64f31" title="Initialize a new GRIB2 message and pack GRIB2 sections 0 (Indicator) and 1 (Identification).">gribcreate()</a> first.</li>
<li>2 GRIB message already complete.</li>
<li>3 Sum of Section byte counts doesn't add to total byte count.</li>
<li>4 Previous Section was not 7.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2000-05-02 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2create_8F90_source.html#l00905">905</a> of file <a class="el" href="g2create_8F90_source.html">g2create.F90</a>.</p>

<p class="reference">References <a class="el" href="g2bytes_8F90_source.html#l00021">g2_gbytec()</a>, and <a class="el" href="g2bytes_8F90_source.html#l00238">g2_sbytec()</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2gf_8F90_source.html#l00035">putgb2()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="g2create_8F90.html">g2create.F90</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
