<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCEPLIBS-g2: g2index.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NCEPLIBS-g2
   &#160;<span id="projectnumber">3.4.9</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('g2index_8F90.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">g2index.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Subroutines for dealing with indexes.  
<a href="#details">More...</a></p>

<p><a href="g2index_8F90_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a272c6703cd2781d8b4efdf47f1a74ea8"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2index_8F90.html#a272c6703cd2781d8b4efdf47f1a74ea8">g2_create_index</a> (lugb, lugi, idxver, filename, iret)</td></tr>
<tr class="memdesc:a272c6703cd2781d8b4efdf47f1a74ea8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a version 1 or 2 index file for a GRIB2 file.  <a href="g2index_8F90.html#a272c6703cd2781d8b4efdf47f1a74ea8">More...</a><br /></td></tr>
<tr class="separator:a272c6703cd2781d8b4efdf47f1a74ea8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94140fada0d8fed228d4b821a77e9117"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2index_8F90.html#a94140fada0d8fed228d4b821a77e9117">g2_write_index_headers</a> (lugi, nlen, nnum, idxver, filename)</td></tr>
<tr class="memdesc:a94140fada0d8fed228d4b821a77e9117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write index headers.  <a href="g2index_8F90.html#a94140fada0d8fed228d4b821a77e9117">More...</a><br /></td></tr>
<tr class="separator:a94140fada0d8fed228d4b821a77e9117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1a58a9584241f441c556aff763733ab"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2index_8F90.html#ac1a58a9584241f441c556aff763733ab">getg2i</a> (lugi, cbuf, nlen, nnum, iret)</td></tr>
<tr class="memdesc:ac1a58a9584241f441c556aff763733ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a version 1 index file and return its contents.  <a href="g2index_8F90.html#ac1a58a9584241f441c556aff763733ab">More...</a><br /></td></tr>
<tr class="separator:ac1a58a9584241f441c556aff763733ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae24e3633f74e1d49d787fa19b07f716c"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2index_8F90.html#ae24e3633f74e1d49d787fa19b07f716c">getg2i2</a> (lugi, cbuf, idxver, nlen, nnum, iret)</td></tr>
<tr class="memdesc:ae24e3633f74e1d49d787fa19b07f716c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a version 1 or 2 index file and return its contents.  <a href="g2index_8F90.html#ae24e3633f74e1d49d787fa19b07f716c">More...</a><br /></td></tr>
<tr class="separator:ae24e3633f74e1d49d787fa19b07f716c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa5881fdd8a2023f027a0bda66baa30c"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2index_8F90.html#aaa5881fdd8a2023f027a0bda66baa30c">getg2i2r</a> (lugb, msk1, msk2, mnum, idxver, cbuf, nlen, nnum, nmess, iret)</td></tr>
<tr class="memdesc:aaa5881fdd8a2023f027a0bda66baa30c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a version 1 or 2 index record for each message in a GRIB2 file.  <a href="g2index_8F90.html#aaa5881fdd8a2023f027a0bda66baa30c">More...</a><br /></td></tr>
<tr class="separator:aaa5881fdd8a2023f027a0bda66baa30c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aada0a1dc7afb86ab654ab7df4755c213"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2index_8F90.html#aada0a1dc7afb86ab654ab7df4755c213">getg2ir</a> (lugb, msk1, msk2, mnum, cbuf, nlen, nnum, nmess, iret)</td></tr>
<tr class="memdesc:aada0a1dc7afb86ab654ab7df4755c213"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a version 1 index record for each message in a GRIB2 file.  <a href="g2index_8F90.html#aada0a1dc7afb86ab654ab7df4755c213">More...</a><br /></td></tr>
<tr class="separator:aada0a1dc7afb86ab654ab7df4755c213"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64d412b558a3d5cfcc8e636df75f0ee3"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2index_8F90.html#a64d412b558a3d5cfcc8e636df75f0ee3">getgb2s</a> (cbuf, nlen, nnum, j, jdisc, jids, jpdtn, jpdt, jgdtn, jgdt, k, gfld, lpos, iret)</td></tr>
<tr class="memdesc:a64d412b558a3d5cfcc8e636df75f0ee3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find information about a GRIB field from the index and fill a <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>.  <a href="g2index_8F90.html#a64d412b558a3d5cfcc8e636df75f0ee3">More...</a><br /></td></tr>
<tr class="separator:a64d412b558a3d5cfcc8e636df75f0ee3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9bd887fcccc3c8ee5b61868497c5502"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2index_8F90.html#ae9bd887fcccc3c8ee5b61868497c5502">getgb2s2</a> (cbuf, idxver, nlen, nnum, j, jdisc, jids, jpdtn, jpdt, jgdtn, jgdt, k, gfld, lpos, iret)</td></tr>
<tr class="memdesc:ae9bd887fcccc3c8ee5b61868497c5502"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find information about a GRIB field from the index and fill a <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>.  <a href="g2index_8F90.html#ae9bd887fcccc3c8ee5b61868497c5502">More...</a><br /></td></tr>
<tr class="separator:ae9bd887fcccc3c8ee5b61868497c5502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a681cc6ee1b2c79c57285604831ce95dd"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2index_8F90.html#a681cc6ee1b2c79c57285604831ce95dd">getidx</a> (lugb, lugi, cindex, nlen, nnum, iret)</td></tr>
<tr class="memdesc:a681cc6ee1b2c79c57285604831ce95dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find, read or generate a version 1 GRIB2 index for a GRIB2 file (which must be &lt; 2 GB).  <a href="g2index_8F90.html#a681cc6ee1b2c79c57285604831ce95dd">More...</a><br /></td></tr>
<tr class="separator:a681cc6ee1b2c79c57285604831ce95dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9e12eb8b9f545025f0f0e26e63b7c84"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2index_8F90.html#ab9e12eb8b9f545025f0f0e26e63b7c84">getidx2</a> (lugb, lugi, idxver, cindex, nlen, nnum, iret)</td></tr>
<tr class="memdesc:ab9e12eb8b9f545025f0f0e26e63b7c84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find, read or generate a version 1 or 2 GRIB2 index for a GRIB2 file (which may be &gt; 2 GB).  <a href="g2index_8F90.html#ab9e12eb8b9f545025f0f0e26e63b7c84">More...</a><br /></td></tr>
<tr class="separator:ab9e12eb8b9f545025f0f0e26e63b7c84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac02dafd6109baa69a66dc278d6b0c083"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2index_8F90.html#ac02dafd6109baa69a66dc278d6b0c083">gf_finalize</a> (iret)</td></tr>
<tr class="memdesc:ac02dafd6109baa69a66dc278d6b0c083"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free all memory associated with the library.  <a href="g2index_8F90.html#ac02dafd6109baa69a66dc278d6b0c083">More...</a><br /></td></tr>
<tr class="separator:ac02dafd6109baa69a66dc278d6b0c083"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b60285d6eae6ecb9cd4b887b70388c7"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2index_8F90.html#a1b60285d6eae6ecb9cd4b887b70388c7">ix2gb2</a> (lugb, lskip8, idxver, lgrib, cbuf, numfld, mlen, iret)</td></tr>
<tr class="memdesc:a1b60285d6eae6ecb9cd4b887b70388c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a version 1 or 2 index record for each field in a GRIB2 message.  <a href="g2index_8F90.html#a1b60285d6eae6ecb9cd4b887b70388c7">More...</a><br /></td></tr>
<tr class="separator:a1b60285d6eae6ecb9cd4b887b70388c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafeb30e8a8c7d03742f733a34846a6b1"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="g2index_8F90.html#aafeb30e8a8c7d03742f733a34846a6b1">ixgb2</a> (lugb, lskip, lgrib, cbuf, numfld, mlen, iret)</td></tr>
<tr class="memdesc:aafeb30e8a8c7d03742f733a34846a6b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a version 1 index record for each field in a GRIB2 message.  <a href="g2index_8F90.html#aafeb30e8a8c7d03742f733a34846a6b1">More...</a><br /></td></tr>
<tr class="separator:aafeb30e8a8c7d03742f733a34846a6b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Subroutines for dealing with indexes. </p>
<dl class="section author"><dt>Author</dt><dd>Edward Hartnett </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Jan 31, 2024 </dd></dl>

<p class="definition">Definition in file <a class="el" href="g2index_8F90_source.html">g2index.F90</a>.</p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a272c6703cd2781d8b4efdf47f1a74ea8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a272c6703cd2781d8b4efdf47f1a74ea8">&#9670;&nbsp;</a></span>g2_create_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine g2_create_index </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lugb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lugi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>idxver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character*(*)&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>iret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a version 1 or 2 index file for a GRIB2 file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lugb</td><td>Logical unit of opened GRIB2 file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lugi</td><td>Logical unit file opened to write index to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idxver</td><td>Index version. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>Name of GRIB2 file. This file must already be open, with logical unit passed to the lugb parameter. The filename is also encoded in one of the index header records. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iret</td><td>Return code:<ul>
<li>0 success</li>
<li>90 problem opening GRIB2 file.</li>
<li>91 problem opening index file.</li>
<li>92 no messages found in GRIB2 file.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Ed Hartnett, Mark Iredell </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Feb 15, 2024 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2index_8F90_source.html#l00020">20</a> of file <a class="el" href="g2index_8F90_source.html">g2index.F90</a>.</p>

<p class="reference">References <a class="el" href="g2index_8F90_source.html#l00103">g2_write_index_headers()</a>, and <a class="el" href="g2index_8F90_source.html#l00627">getg2i2r()</a>.</p>

</div>
</div>
<a id="a94140fada0d8fed228d4b821a77e9117"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94140fada0d8fed228d4b821a77e9117">&#9670;&nbsp;</a></span>g2_write_index_headers()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine g2_write_index_headers </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lugi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>nlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>nnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>idxver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character, dimension(*), intent(in)&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write index headers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lugi</td><td>integer logical unit of output index file </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nlen</td><td>integer total length of index records </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nnum</td><td>integer number of index records </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idxver</td><td>Index version, 1 for legacy, 2 for files that may be &gt; 2 GB. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>character name of GRIB file</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Iredell, Ed Hartnett </dd></dl>
<dl class="section date"><dt>Date</dt><dd>93-11-22 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2index_8F90_source.html#l00102">102</a> of file <a class="el" href="g2index_8F90_source.html">g2index.F90</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2index_8F90_source.html#l00021">g2_create_index()</a>.</p>

</div>
</div>
<a id="ac1a58a9584241f441c556aff763733ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1a58a9584241f441c556aff763733ab">&#9670;&nbsp;</a></span>getg2i()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine getg2i </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lugi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=1), dimension(:), pointer&#160;</td>
          <td class="paramname"><em>cbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>nlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>nnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>iret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a version 1 index file and return its contents. </p>
<p>The index file may be generated by the grb2index utility of the <a href="https://github.com/NOAA-EMC/NCEPLIBS-grib_util">NCEPLIBS-grib_util</a> project.</p>
<p>For the contents of the index file, see getgi2().</p>
<p>This subroutine is maintained for backward compatibility, and may only be used with version 1 of the index files. To handle both version 1 and 2 index files, use <a class="el" href="g2index_8F90.html#ae24e3633f74e1d49d787fa19b07f716c" title="Read a version 1 or 2 index file and return its contents.">getg2i2()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lugi</td><td>Integer unit of the GRIB index file. Must be opened by <a href="https://noaa-emc.github.io/NCEPLIBS-bacio/">baopen() or baopenr()</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cbuf</td><td>Pointer to a buffer that will get the index records. Memory will be allocated within this function, so callers must free the memory that cbuf points to, using deallocate(cbuf) when cbuf is no longer needed. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nlen</td><td>Total length of all index records. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nnum</td><td>Number of index records. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iret</td><td>Return code.<ul>
<li>0 No error.</li>
<li>2 not enough memory to hold index buffer</li>
<li>3 error reading index file buffer</li>
<li>4 error reading index file header</li>
<li>5 index format 2 detected</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Mark Iredell, Ed Hartnett </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2000-05-26 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2index_8F90_source.html#l00421">421</a> of file <a class="el" href="g2index_8F90_source.html">g2index.F90</a>.</p>

<p class="reference">References <a class="el" href="g2index_8F90_source.html#l00504">getg2i2()</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2getgb2_8F90_source.html#l00512">getgb2p()</a>.</p>

</div>
</div>
<a id="ae24e3633f74e1d49d787fa19b07f716c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae24e3633f74e1d49d787fa19b07f716c">&#9670;&nbsp;</a></span>getg2i2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine getg2i2 </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lugi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=1), dimension(:), pointer&#160;</td>
          <td class="paramname"><em>cbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>idxver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>nlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>nnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>iret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a version 1 or 2 index file and return its contents. </p>
<p>The index file may be generated by the grb2index utility of the <a href="https://github.com/NOAA-EMC/NCEPLIBS-grib_util">NCEPLIBS-grib_util</a> project.</p>
<p>The index file has two header records:</p><ol type="1">
<li>an 81-byte header with 'GB2IX1' in columns 42-47</li>
<li>an 81-byte header with the index version number, the number of bytes to skip before index records, total length in bytes of the index records, number of index records, and the GRIB file basename.</li>
</ol>
<p>Each record in the index table contains the following fields. All integers are in big-endian format in the file. The only difference between index version 1 and index version 2 is the size of the field containing the number of bytes to skip in file before message. To accomodate files &gt; 2 GB, this must be a 64-bit int.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Index Version 1   </th><th class="markdownTableHeadNone">Index Version 2   </th><th class="markdownTableHeadNone">Contents    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">001 - 004   </td><td class="markdownTableBodyNone">001 - 004   </td><td class="markdownTableBodyNone">length of index record    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">005 - 008   </td><td class="markdownTableBodyNone">005 - 012   </td><td class="markdownTableBodyNone">bytes to skip in data file before grib message    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">009 - 012   </td><td class="markdownTableBodyNone">013 - 016   </td><td class="markdownTableBodyNone">bytes to skip in message before lus (local use) set = 0, if no local section.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">013 - 016   </td><td class="markdownTableBodyNone">017 - 020   </td><td class="markdownTableBodyNone">bytes to skip in message before gds    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">017 - 020   </td><td class="markdownTableBodyNone">021 - 024   </td><td class="markdownTableBodyNone">bytes to skip in message before pds    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">021 - 024   </td><td class="markdownTableBodyNone">025 - 028   </td><td class="markdownTableBodyNone">bytes to skip in message before drs    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">025 - 028   </td><td class="markdownTableBodyNone">029 - 032   </td><td class="markdownTableBodyNone">bytes to skip in message before bms    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">029 - 032   </td><td class="markdownTableBodyNone">033 - 036   </td><td class="markdownTableBodyNone">bytes to skip in message before data section    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">033 - 040   </td><td class="markdownTableBodyNone">037 - 044   </td><td class="markdownTableBodyNone">bytes total in the message    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">041 - 041   </td><td class="markdownTableBodyNone">045 - 045   </td><td class="markdownTableBodyNone">grib version number (always 2)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">042 - 042   </td><td class="markdownTableBodyNone">046 - 046   </td><td class="markdownTableBodyNone">message discipline    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">043 - 044   </td><td class="markdownTableBodyNone">047 - 048   </td><td class="markdownTableBodyNone">field number within grib2 message    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">045 - ii   </td><td class="markdownTableBodyNone">045 - ii   </td><td class="markdownTableBodyNone">identification section (ids)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ii+1- jj   </td><td class="markdownTableBodyNone">ii+1- jj   </td><td class="markdownTableBodyNone">grid definition section (gds)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">jj+1- kk   </td><td class="markdownTableBodyNone">jj+1- kk   </td><td class="markdownTableBodyNone">product definition section (pds)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">kk+1- ll   </td><td class="markdownTableBodyNone">kk+1- ll   </td><td class="markdownTableBodyNone">the data representation section (drs)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ll+1-ll+6   </td><td class="markdownTableBodyNone">ll+1-ll+6   </td><td class="markdownTableBodyNone">first 6 bytes of the bit map section (bms)   </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>Subprogram can be called from a multiprocessing environment. Do not engage the same logical unit from more than one processor.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lugi</td><td>Integer unit of the unblocked GRIB index file. Must be opened by <a href="https://noaa-emc.github.io/NCEPLIBS-bacio/">baopen() or baopenr()</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cbuf</td><td>Pointer to a buffer that will get the index records. Memory will be allocated within this function, so callers must free the memory that cbuf points to, using deallocate(cbuf) when cbuf is no longer needed. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">idxver</td><td>Index version of this index, will be 1 or 2. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nlen</td><td>Total length of all index records. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nnum</td><td>Number of index records. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iret</td><td>Return code.<ul>
<li>0 No error.</li>
<li>2 not enough memory to hold index buffer</li>
<li>3 error reading index file buffer</li>
<li>4 error reading index file header</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Ed Hartnett, Mark Iredell </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Feb 9, 2024 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2index_8F90_source.html#l00503">503</a> of file <a class="el" href="g2index_8F90_source.html">g2index.F90</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2index_8F90_source.html#l00422">getg2i()</a>, and <a class="el" href="g2index_8F90_source.html#l00266">getidx2()</a>.</p>

</div>
</div>
<a id="aaa5881fdd8a2023f027a0bda66baa30c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa5881fdd8a2023f027a0bda66baa30c">&#9670;&nbsp;</a></span>getg2i2r()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine getg2i2r </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lugb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer (kind = 8), intent(in)&#160;</td>
          <td class="paramname"><em>msk1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer (kind = 8), intent(in)&#160;</td>
          <td class="paramname"><em>msk2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>mnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>idxver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len = 1), dimension(:), pointer&#160;</td>
          <td class="paramname"><em>cbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>nlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>nnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>nmess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>iret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a version 1 or 2 index record for each message in a GRIB2 file. </p>
<p>The index record contains byte offsets to the message, it's length, and byte offsets within the message to each section. The index file record format is documented in subroutine <a class="el" href="g2index_8F90.html#aafeb30e8a8c7d03742f733a34846a6b1" title="Generate a version 1 index record for each field in a GRIB2 message.">ixgb2()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Subprogram can be called from a multiprocessing environment. Do not engage the same logical unit from more than one processor.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lugb</td><td>Unit of the GRIB file. Must be opened by <a href="https://noaa-emc.github.io/NCEPLIBS-bacio/">baopen() or baopenr()</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msk1</td><td>Number of bytes to search for first message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msk2</td><td>Number of bytes to search for other messages. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mnum</td><td>Number of GRIB messages to skip (usually 0). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idxver</td><td>Index version number. Use 1 for legacy, 2 for files &gt; 2 GB. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cbuf</td><td>Pointer to a buffer that will get the index records. If any memory is associated with cbuf when this subroutine is called, cbuf will be nullified in the subroutine. Initially cbuf will get an allocation of 5000 bytes. realloc() will be used to increase the size if necessary. Users must free memory that cbuf points to when cbuf is no longer needed. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nlen</td><td>Total length of index record buffer in bytes. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nnum</td><td>Number of index records, zero if no GRIB messages are found. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nmess</td><td>Last GRIB message in file successfully processed </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iret</td><td>Return code.<ul>
<li>0 No error.</li>
<li>1 Not enough memory available to hold full index buffer.</li>
<li>2 Not enough memory to allocate initial index buffer.</li>
<li>3 Error deallocating memory.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Mark Iredell, Ed Hartnett </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1995-10-31 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2index_8F90_source.html#l00626">626</a> of file <a class="el" href="g2index_8F90_source.html">g2index.F90</a>.</p>

<p class="reference">References <a class="el" href="g2index_8F90_source.html#l01208">ix2gb2()</a>, and <a class="el" href="skgb_8F90_source.html#l00053">skgb8()</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2index_8F90_source.html#l00021">g2_create_index()</a>, <a class="el" href="g2index_8F90_source.html#l00566">getg2ir()</a>, and <a class="el" href="g2index_8F90_source.html#l00266">getidx2()</a>.</p>

</div>
</div>
<a id="aada0a1dc7afb86ab654ab7df4755c213"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aada0a1dc7afb86ab654ab7df4755c213">&#9670;&nbsp;</a></span>getg2ir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine getg2ir </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lugb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>msk1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>msk2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>mnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len = 1), dimension(:), pointer&#160;</td>
          <td class="paramname"><em>cbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>nlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>nnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>nmess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>iret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a version 1 index record for each message in a GRIB2 file. </p>
<p>The index record contains byte offsets to the message, it's length, and byte offsets within the message to each section. The index file record format is documented in subroutine <a class="el" href="g2index_8F90.html#aafeb30e8a8c7d03742f733a34846a6b1" title="Generate a version 1 index record for each field in a GRIB2 message.">ixgb2()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>Subprogram can be called from a multiprocessing environment. Do not engage the same logical unit from more than one processor.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lugb</td><td>Unit of the unblocked GRIB file. Must be opened by <a href="https://noaa-emc.github.io/NCEPLIBS-bacio/">baopen() or baopenr()</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msk1</td><td>Number of bytes to search for first message. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msk2</td><td>Number of bytes to search for other messages. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mnum</td><td>Number of GRIB messages to skip (usually 0). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cbuf</td><td>Pointer to a buffer that will get the index records. If any memory is associated with cbuf when this subroutine is called, cbuf will be nullified in the subroutine. Initially cbuf will get an allocation of 5000 bytes. realloc() will be used to increase the size if necessary. Users must free memory that cbuf points to when cbuf is no longer needed. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nlen</td><td>Total length of index record buffer in bytes. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nnum</td><td>Number of index records, zero if no GRIB messages are found. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nmess</td><td>Last GRIB message in file successfully processed </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iret</td><td>Return code.<ul>
<li>0 No error.</li>
<li>1 Not enough memory available to hold full index buffer.</li>
<li>2 Not enough memory to allocate initial index buffer.</li>
<li>3 Error deallocating memory.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Mark Iredell, Ed Hartnett </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1995-10-31 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2index_8F90_source.html#l00565">565</a> of file <a class="el" href="g2index_8F90_source.html">g2index.F90</a>.</p>

<p class="reference">References <a class="el" href="g2index_8F90_source.html#l00627">getg2i2r()</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2getgb2_8F90_source.html#l00512">getgb2p()</a>.</p>

</div>
</div>
<a id="a64d412b558a3d5cfcc8e636df75f0ee3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64d412b558a3d5cfcc8e636df75f0ee3">&#9670;&nbsp;</a></span>getgb2s()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine getgb2s </td>
          <td>(</td>
          <td class="paramtype">character(len = 1), dimension(nlen), intent(in)&#160;</td>
          <td class="paramname"><em>cbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>nlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>nnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>j</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>jdisc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>jids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>jpdtn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>jpdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>jgdtn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>jgdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">gribfield</a>), intent(out)&#160;</td>
          <td class="paramname"><em>gfld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>lpos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>iret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find information about a GRIB field from the index and fill a <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>. </p>
<p>For a description of the index record see <a class="el" href="g2index_8F90.html#ae24e3633f74e1d49d787fa19b07f716c" title="Read a version 1 or 2 index file and return its contents.">getg2i2()</a>.</p>
<p>Users of this routine will need to include the line "use grib_mod" in their calling routine.</p>
<p>The unpacked bitmap and bitmap data field are the only components of the <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a> type not set by this routine.</p>
<dl class="section note"><dt>Note</dt><dd>This subprogram is intended for private use by <a class="el" href="g2getgb2_8F90.html#a4e7aa8984989d124fd1db391de218d5f" title="This is a legacy version of getgb2i2().">getgb2()</a> routines only. Note that derived type <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a> contains pointers to many arrays of data. The memory for these arrays is allocated when the values in the arrays are set. Users must free this memory, when it is no longer needed, by a call to subroutine <a class="el" href="g2gf_8F90.html#a027efd02c99c9464153fc76d9bb9627e" title="Free memory that was used to store array values in derived type grib_mod::gribfield.">gf_free()</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cbuf</td><td>Buffer (of size nlen bytes) containing index data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nlen</td><td>Total length of all index records. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nnum</td><td>Number of index records. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">j</td><td>Number of fields to skip (0 to search from beginning). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jdisc</td><td>GRIB2 discipline number of requested field. See <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table0-0.shtml">GRIB2 - TABLE 0.0 - DISCIPLINE</a>. Use -1 to accept any discipline. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jids</td><td>Array of values in the identification section. (Set to -9999 for wildcard.)<ul>
<li>jids(1) Identification of originating centre. See [TABLE 0 - NATIONAL/INTERNATIONAL ORIGINATING CENTERS](<a href="https://www.nco.ncep.noaa.gov/pmb/docs/on388/table0.html">https://www.nco.ncep.noaa.gov/pmb/docs/on388/table0.html</a>).</li>
<li>jids(2) Identification of originating sub-centre. See [TABLE C - NATIONAL SUB-CENTERS](<a href="https://www.nco.ncep.noaa.gov/pmb/docs/on388/tablec.html">https://www.nco.ncep.noaa.gov/pmb/docs/on388/tablec.html</a>).</li>
<li>jids(3) GRIB master tables version number. See [GRIB2 - TABLE 1.0<ul>
<li>GRIB Master Tables Version Number](<a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-0.shtml">https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-0.shtml</a>).</li>
</ul>
</li>
<li>jids(4) GRIB local tables version number. See [GRIB2 - TABLE 1.1<ul>
<li>GRIB Local Tables Version Number](<a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-1.shtml">https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-1.shtml</a>).</li>
</ul>
</li>
<li>jids(5) Significance of reference time. See [GRIB2 - TABLE 1.2 - Significance of Reference Time](<a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-2.shtml">https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-2.shtml</a>).</li>
<li>jids(6) year (4 digits)</li>
<li>jids(7) month</li>
<li>jids(8) day</li>
<li>jids(9) hour</li>
<li>jids(10) minute</li>
<li>jids(11) second</li>
<li>jids(12) Production status of processed data. See [GRIB2 - TABLE 1.3 - Production Status of Data](<a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-3.shtml">https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-3.shtml</a>).</li>
<li>jids(13) Type of processed data. See <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-4.shtml">GRIB2 - TABLE 1.4 - TYPE OF DATA</a>. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jpdtn</td><td>Product Definition Template (PDT) number (n) (if = -1, don't bother matching PDT - accept any). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jpdt</td><td>Array of values defining the Product Definition Template of the field for which to search (=-9999 for wildcard). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jgdtn</td><td>Grid Definition Template (GDT) number (if = -1, don't bother matching GDT - accept any). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jgdt</td><td>array of values defining the Grid Definition Template of the field for which to search (=-9999 for wildcard). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">k</td><td>Field number unpacked. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">gfld</td><td>Derived type <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">lpos</td><td>Starting position of the found index record within the complete index buffer, CBUF. = 0, if request not found. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iret</td><td>integer return code:<ul>
<li>0 No error.</li>
<li>97 Error reading GRIB file.</li>
<li>other gf_getfld GRIB2 unpacker return code.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert, Ed Hartnett </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2002-01-15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2index_8F90_source.html#l00784">784</a> of file <a class="el" href="g2index_8F90_source.html">g2index.F90</a>.</p>

<p class="reference">References <a class="el" href="g2index_8F90_source.html#l00899">getgb2s2()</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2getgb2_8F90_source.html#l00512">getgb2p()</a>.</p>

</div>
</div>
<a id="ae9bd887fcccc3c8ee5b61868497c5502"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9bd887fcccc3c8ee5b61868497c5502">&#9670;&nbsp;</a></span>getgb2s2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine getgb2s2 </td>
          <td>(</td>
          <td class="paramtype">character(len = 1), dimension(nlen), intent(in)&#160;</td>
          <td class="paramname"><em>cbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>idxver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>nlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>nnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>j</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>jdisc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>jids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>jpdtn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>jpdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>jgdtn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>jgdt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">gribfield</a>), intent(out)&#160;</td>
          <td class="paramname"><em>gfld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>lpos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>iret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find information about a GRIB field from the index and fill a <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>. </p>
<p>For a description of the index record see <a class="el" href="g2index_8F90.html#ae24e3633f74e1d49d787fa19b07f716c" title="Read a version 1 or 2 index file and return its contents.">getg2i2()</a>.</p>
<p>Users of this routine will need to include the line "use grib_mod" in their calling routine.</p>
<p>The unpacked bitmap and bitmap data field are the only components of the <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a> type not set by this routine.</p>
<dl class="section note"><dt>Note</dt><dd>This subprogram is intended for private use by <a class="el" href="g2getgb2_8F90.html#a4e7aa8984989d124fd1db391de218d5f" title="This is a legacy version of getgb2i2().">getgb2()</a> routines only. Note that derived type <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a> contains pointers to many arrays of data. The memory for these arrays is allocated when the values in the arrays are set. Users must free this memory, when it is no longer needed, by a call to subroutine <a class="el" href="g2gf_8F90.html#a027efd02c99c9464153fc76d9bb9627e" title="Free memory that was used to store array values in derived type grib_mod::gribfield.">gf_free()</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cbuf</td><td>Buffer (of size nlen bytes) containing index data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idxver</td><td>Index version, 1 for legacy, 2 if files may be &gt; 2 GB. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nlen</td><td>Total length of all index records. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">nnum</td><td>Number of index records. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">j</td><td>Number of fields to skip (0 to search from beginning). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jdisc</td><td>GRIB2 discipline number of requested field. See <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table0-0.shtml">GRIB2 - TABLE 0.0 - DISCIPLINE</a>. Use -1 to accept any discipline. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jids</td><td>Array of values in the identification section. (Set to -9999 for wildcard.)<ul>
<li>jids(1) Identification of originating centre. See [TABLE 0 - NATIONAL/INTERNATIONAL ORIGINATING CENTERS](<a href="https://www.nco.ncep.noaa.gov/pmb/docs/on388/table0.html">https://www.nco.ncep.noaa.gov/pmb/docs/on388/table0.html</a>).</li>
<li>jids(2) Identification of originating sub-centre. See [TABLE C - NATIONAL SUB-CENTERS](<a href="https://www.nco.ncep.noaa.gov/pmb/docs/on388/tablec.html">https://www.nco.ncep.noaa.gov/pmb/docs/on388/tablec.html</a>).</li>
<li>jids(3) GRIB master tables version number. See [GRIB2 - TABLE 1.0<ul>
<li>GRIB Master Tables Version Number](<a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-0.shtml">https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-0.shtml</a>).</li>
</ul>
</li>
<li>jids(4) GRIB local tables version number. See [GRIB2 - TABLE 1.1<ul>
<li>GRIB Local Tables Version Number](<a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-1.shtml">https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-1.shtml</a>).</li>
</ul>
</li>
<li>jids(5) Significance of reference time. See [GRIB2 - TABLE 1.2 - Significance of Reference Time](<a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-2.shtml">https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-2.shtml</a>).</li>
<li>jids(6) year (4 digits)</li>
<li>jids(7) month</li>
<li>jids(8) day</li>
<li>jids(9) hour</li>
<li>jids(10) minute</li>
<li>jids(11) second</li>
<li>jids(12) Production status of processed data. See [GRIB2 - TABLE 1.3 - Production Status of Data](<a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-3.shtml">https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-3.shtml</a>).</li>
<li>jids(13) Type of processed data. See <a href="https://www.nco.ncep.noaa.gov/pmb/docs/grib2/grib2_doc/grib2_table1-4.shtml">GRIB2 - TABLE 1.4 - TYPE OF DATA</a>. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jpdtn</td><td>Product Definition Template (PDT) number (n) (if = -1, don't bother matching PDT - accept any). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jpdt</td><td>Array of values defining the Product Definition Template of the field for which to search (=-9999 for wildcard). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jgdtn</td><td>Grid Definition Template (GDT) number (if = -1, don't bother matching GDT - accept any). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">jgdt</td><td>array of values defining the Grid Definition Template of the field for which to search (=-9999 for wildcard). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">k</td><td>Field number unpacked. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">gfld</td><td>Derived type <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">lpos</td><td>Starting position of the found index record within the complete index buffer, CBUF. = 0, if request not found. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iret</td><td>integer return code:<ul>
<li>0 No error.</li>
<li>97 Error reading GRIB file.</li>
<li>other gf_getfld GRIB2 unpacker return code.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert, Ed Hartnett </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Feb 9 2024 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2index_8F90_source.html#l00897">897</a> of file <a class="el" href="g2index_8F90_source.html">g2index.F90</a>.</p>

<p class="reference">References <a class="el" href="g2bytes_8F90_source.html#l00021">g2_gbytec()</a>, <a class="el" href="g2unpack_8F90_source.html#l00042">gf_unpack1()</a>, <a class="el" href="g2unpack_8F90_source.html#l00184">gf_unpack3()</a>, <a class="el" href="g2unpack_8F90_source.html#l00334">gf_unpack4()</a>, and <a class="el" href="g2unpack_8F90_source.html#l00467">gf_unpack5()</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2getgb2_8F90_source.html#l00193">getgb2i2()</a>, and <a class="el" href="g2index_8F90_source.html#l00786">getgb2s()</a>.</p>

</div>
</div>
<a id="a681cc6ee1b2c79c57285604831ce95dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a681cc6ee1b2c79c57285604831ce95dd">&#9670;&nbsp;</a></span>getidx()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine getidx </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lugb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lugi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len = 1), dimension(:), pointer&#160;</td>
          <td class="paramname"><em>cindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>nlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>nnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>iret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find, read or generate a version 1 GRIB2 index for a GRIB2 file (which must be &lt; 2 GB). </p>
<p>If the index already exists in library memory, it is returned, otherwise, the index is read from an existing index file associated with unit lugi or generated from the GRIB2 file lugb.</p>
<p>Users can force a regeneration of an index: if lugi equals lugb, the index will be regenerated from the data in file lugb. If lugi is less than zero, then the index is re-read from index file abs(lugi).</p>
<p>This subroutine allocates memory and stores the resulting pointers in an array that is a Fortran "save" variable. The result is that the memory will not be freed by the library and cannot be reached by the caller. To free this memory call <a class="el" href="g2index_8F90.html#ac02dafd6109baa69a66dc278d6b0c083" title="Free all memory associated with the library.">gf_finalize()</a> after all library operations are complete.</p>
<dl class="section note"><dt>Note</dt><dd>The file unit numbers must be in range 1 - 9999.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lugb</td><td>integer unit of the GRIB2 data file. File must have been opened with <a href="https://noaa-emc.github.io/NCEPLIBS-bacio/">baopen() or baopenr()</a> before calling this routine. If 0, then all saved memory will be released (necessary for g2_finalize()). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lugi</td><td>integer unit of the GRIB2 index file. If nonzero, file must have been opened with <a href="https://noaa-emc.github.io/NCEPLIBS-bacio/">baopen() or baopenr()</a> before calling this routine. Set to 0 to get index information from the GRIB2 file. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">cindex</td><td>character*1 Pointer to a buffer that will get index records. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nlen</td><td>integer Total length of all index records. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nnum</td><td>integer Number of index records. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iret</td><td>integer Return code:<ul>
<li>0 No error.</li>
<li>90 Unit number out of range.</li>
<li>96 Error reading/creating index file.</li>
<li>97 Index version 2 detected.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert, Ed Hartnett </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2005-03-15 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2index_8F90_source.html#l00197">197</a> of file <a class="el" href="g2index_8F90_source.html">g2index.F90</a>.</p>

<p class="reference">References <a class="el" href="g2index_8F90_source.html#l00266">getidx2()</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2index_8F90_source.html#l01396">gf_finalize()</a>.</p>

</div>
</div>
<a id="ab9e12eb8b9f545025f0f0e26e63b7c84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9e12eb8b9f545025f0f0e26e63b7c84">&#9670;&nbsp;</a></span>getidx2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine getidx2 </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lugb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>lugi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(inout)&#160;</td>
          <td class="paramname"><em>idxver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len = 1), dimension(:), pointer&#160;</td>
          <td class="paramname"><em>cindex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>nlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>nnum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>iret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find, read or generate a version 1 or 2 GRIB2 index for a GRIB2 file (which may be &gt; 2 GB). </p>
<p>If the index already exists in library memory, it is returned, otherwise, the index is read from an existing index file associated with unit lugi or generated from the GRIB2 file lugb.</p>
<p>Users can force a regeneration of an index: if lugi equals lugb, the index will be regenerated from the data in file lugb. If lugi is less than zero, then the index is re-read from index file abs(lugi).</p>
<p>This subroutine allocates memory and stores the resulting pointers in an array that is a Fortran "save" variable. The result is that the memory will not be freed by the library and cannot be reached by the caller. To free this memory call <a class="el" href="g2index_8F90.html#ac02dafd6109baa69a66dc278d6b0c083" title="Free all memory associated with the library.">gf_finalize()</a> after all library operations are complete.</p>
<dl class="section note"><dt>Note</dt><dd>The file unit numbers must be in range 1 - 9999.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">lugb</td><td>integer unit of the GRIB2 data file. File must have been opened with <a href="https://noaa-emc.github.io/NCEPLIBS-bacio/">baopen() or baopenr()</a> before calling this routine. If 0, then all saved memory will be released (necessary for g2_finalize()). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lugi</td><td>integer unit of the GRIB2 index file. If nonzero, file must have been opened with <a href="https://noaa-emc.github.io/NCEPLIBS-bacio/">baopen() or baopenr()</a> before calling this routine. Set to 0 to get index information from the GRIB2 file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">idxver</td><td>Index version, 1 for legacy, 2 if files may be &gt; 2 GB. index records. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">cindex</td><td>character*1 Pointer to a buffer that will get index records. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nlen</td><td>integer Total length of all index records. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">nnum</td><td>integer Number of index records. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">iret</td><td>integer Return code:<ul>
<li>0 No error.</li>
<li>90 Unit number out of range.</li>
<li>96 Error reading/creating index file.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Stephen Gilbert, Ed Hartnett </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Feb 9, 2024 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2index_8F90_source.html#l00265">265</a> of file <a class="el" href="g2index_8F90_source.html">g2index.F90</a>.</p>

<p class="reference">References <a class="el" href="g2index_8F90_source.html#l00504">getg2i2()</a>, and <a class="el" href="g2index_8F90_source.html#l00627">getg2i2r()</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2getgb2_8F90_source.html#l00193">getgb2i2()</a>, and <a class="el" href="g2index_8F90_source.html#l00198">getidx()</a>.</p>

</div>
</div>
<a id="ac02dafd6109baa69a66dc278d6b0c083"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac02dafd6109baa69a66dc278d6b0c083">&#9670;&nbsp;</a></span>gf_finalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine gf_finalize </td>
          <td>(</td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>iret</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free all memory associated with the library. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">iret</td><td>integer Return code:<ul>
<li>0 No error.</li>
<li>otherwise Error freeing internal resources. </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Ed Hartnett </dd></dl>
<dl class="section date"><dt>Date</dt><dd>7/16/23 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2index_8F90_source.html#l01395">1395</a> of file <a class="el" href="g2index_8F90_source.html">g2index.F90</a>.</p>

<p class="reference">References <a class="el" href="g2index_8F90_source.html#l00198">getidx()</a>.</p>

</div>
</div>
<a id="a1b60285d6eae6ecb9cd4b887b70388c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b60285d6eae6ecb9cd4b887b70388c7">&#9670;&nbsp;</a></span>ix2gb2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine ix2gb2 </td>
          <td>(</td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>lugb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer (kind = 8)&#160;</td>
          <td class="paramname"><em>lskip8</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>idxver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>lgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len = 1), dimension(:), pointer&#160;</td>
          <td class="paramname"><em>cbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>numfld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>mlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>iret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a version 1 or 2 index record for each field in a GRIB2 message. </p>
<p>The index records are written to index buffer pointed to by cbuf. All integers in the index are in big-endian format.</p>
<p>This subroutine is called by <a class="el" href="g2index_8F90.html#aada0a1dc7afb86ab654ab7df4755c213" title="Generate a version 1 index record for each message in a GRIB2 file.">getg2ir()</a>, which packages the index records into an index file.</p>
<p>See <a class="el" href="g2index_8F90.html#ae24e3633f74e1d49d787fa19b07f716c" title="Read a version 1 or 2 index file and return its contents.">getg2i2()</a> for thr format of the index buffer records.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lugb</td><td>Unit of the unblocked GRIB file. Must be opened by <a href="https://noaa-emc.github.io/NCEPLIBS-bacio/">baopen() or baopenr()</a>. </td></tr>
    <tr><td class="paramname">lskip8</td><td>Number of bytes to skip before GRIB message. </td></tr>
    <tr><td class="paramname">idxver</td><td>Index version, use 1 for legacy, 2 for GRIB2 files &gt; 2 GB. </td></tr>
    <tr><td class="paramname">lgrib</td><td>Number of bytes in GRIB message. When subroutine is called, this must be set to the size of the cbuf buffer. </td></tr>
    <tr><td class="paramname">cbuf</td><td>Pointer to a buffer that will get the index records. If any memory is associated with cbuf when this subroutine is called, cbuf will be nullified in the subroutine. Initially cbuf will get an allocation of 5000 bytes. realloc() will be used to increase the size if necessary. Users must free memory that cbuf points to when cbuf is no longer needed. </td></tr>
    <tr><td class="paramname">numfld</td><td>Number of index records created. </td></tr>
    <tr><td class="paramname">mlen</td><td>Total length of all index records. </td></tr>
    <tr><td class="paramname">iret</td><td>Return code<ul>
<li>0 No error</li>
<li>1 Not enough memory available to hold full index buffer.</li>
<li>2 I/O error in read.</li>
<li>3 GRIB message is not edition 2.</li>
<li>4 Not enough memory to allocate extent to index buffer.</li>
<li>5 Unidentified GRIB section encountered.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Ed Hartnett, Mark Iredell </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Feb 5, 2024 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2index_8F90_source.html#l01207">1207</a> of file <a class="el" href="g2index_8F90_source.html">g2index.F90</a>.</p>

<p class="reference">References <a class="el" href="g2bytes_8F90_source.html#l00021">g2_gbytec()</a>, <a class="el" href="g2bytes_8F90_source.html#l00238">g2_sbytec()</a>, and <a class="el" href="g2bytes_8F90_source.html#l00380">g2_sbytec8()</a>.</p>

<p class="reference">Referenced by <a class="el" href="g2index_8F90_source.html#l00627">getg2i2r()</a>, and <a class="el" href="g2index_8F90_source.html#l01149">ixgb2()</a>.</p>

</div>
</div>
<a id="aafeb30e8a8c7d03742f733a34846a6b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafeb30e8a8c7d03742f733a34846a6b1">&#9670;&nbsp;</a></span>ixgb2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine ixgb2 </td>
          <td>(</td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>lugb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>lskip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>lgrib</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len = 1), dimension(:), pointer&#160;</td>
          <td class="paramname"><em>cbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>numfld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>mlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>iret</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a version 1 index record for each field in a GRIB2 message. </p>
<p>The index records are written to index buffer pointed to by cbuf. All integers in the index are in big-endian format.</p>
<p>This subroutine is called by <a class="el" href="g2index_8F90.html#aada0a1dc7afb86ab654ab7df4755c213" title="Generate a version 1 index record for each message in a GRIB2 file.">getg2ir()</a>, which packages the index records into an index file.</p>
<p>See <a class="el" href="g2index_8F90.html#ae24e3633f74e1d49d787fa19b07f716c" title="Read a version 1 or 2 index file and return its contents.">getg2i2()</a> for thr format of the index buffer records.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lugb</td><td>Unit of the unblocked GRIB file. Must be opened by <a href="https://noaa-emc.github.io/NCEPLIBS-bacio/">baopen() or baopenr()</a>. </td></tr>
    <tr><td class="paramname">lskip</td><td>Number of bytes to skip before GRIB message. </td></tr>
    <tr><td class="paramname">lgrib</td><td>Number of bytes in GRIB message. When subroutine is called, this must be set to the size of the cbuf buffer. </td></tr>
    <tr><td class="paramname">cbuf</td><td>Pointer to a buffer that will get the index records. If any memory is associated with cbuf when this subroutine is called, cbuf will be nullified in the subroutine. Initially cbuf will get an allocation of 5000 bytes. realloc() will be used to increase the size if necessary. Users must free memory that cbuf points to when cbuf is no longer needed. </td></tr>
    <tr><td class="paramname">numfld</td><td>Number of index records created. </td></tr>
    <tr><td class="paramname">mlen</td><td>Total length of all index records. </td></tr>
    <tr><td class="paramname">iret</td><td>Return code<ul>
<li>0 No error</li>
<li>1 Not enough memory available to hold full index buffer.</li>
<li>2 I/O error in read.</li>
<li>3 GRIB message is not edition 2.</li>
<li>4 Not enough memory to allocate extent to index buffer.</li>
<li>5 Unidentified GRIB section encountered.</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Mark Iredell, Ed Hartnett </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1995-10-31 </dd></dl>

<p class="definition">Definition at line <a class="el" href="g2index_8F90_source.html#l01148">1148</a> of file <a class="el" href="g2index_8F90_source.html">g2index.F90</a>.</p>

<p class="reference">References <a class="el" href="g2index_8F90_source.html#l01208">ix2gb2()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="g2index_8F90.html">g2index.F90</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
