<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NCEPLIBS-g2: getgb2.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NCEPLIBS-g2
   &#160;<span id="projectnumber">3.4.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('getgb2_8F90.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">getgb2.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Find and unpack a GRIB2 message in a file.  
<a href="#details">More...</a></p>

<p><a href="getgb2_8F90_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a59b91d6ac5c93ac460bb89760bf41694"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="getgb2_8F90.html#a59b91d6ac5c93ac460bb89760bf41694">getgb2</a> (LUGB, LUGI, J, JDISC, JIDS, JPDTN, JPDT, JGDTN, JGDT, UNPACK, K, GFLD, IRET)</td></tr>
<tr class="memdesc:a59b91d6ac5c93ac460bb89760bf41694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find and unpack a GRIB2 message in a file.  <a href="getgb2_8F90.html#a59b91d6ac5c93ac460bb89760bf41694">More...</a><br /></td></tr>
<tr class="separator:a59b91d6ac5c93ac460bb89760bf41694"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Find and unpack a GRIB2 message in a file. </p>
<dl class="section author"><dt>Author</dt><dd>Mark Iredell </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1994-04-01 </dd></dl>

<p class="definition">Definition in file <a class="el" href="getgb2_8F90_source.html">getgb2.F90</a>.</p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a59b91d6ac5c93ac460bb89760bf41694"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59b91d6ac5c93ac460bb89760bf41694">&#9670;&nbsp;</a></span>getgb2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine getgb2 </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>LUGB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>LUGI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>J</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>JDISC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>JIDS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>JPDTN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>JPDT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>JGDTN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>JGDT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>UNPACK</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>K</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">gribfield</a>), intent(out)&#160;</td>
          <td class="paramname"><em>GFLD</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>IRET</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find and unpack a GRIB2 message in a file. </p>
<p>It reads a GRIB index file (or optionally the GRIB file itself) to get the index buffer (i.e. table of contents) for the GRIB file.</p>
<p>Find in the index buffer a reference to the GRIB field requested.</p>
<p>The GRIB field request specifies the number of fields to skip and the unpacked identification section, grid definition template and product defintion section parameters. (A requested parameter of -9999 means to allow any value of this parameter to be found.)</p>
<p>If the requested GRIB field is found, then it is read from the GRIB file and unpacked. Its number is returned along with the associated unpacked parameters. the bitmap (if any); the data values are unpacked only if argument unpack is set to true. If the GRIB field is not found, then the return code will be nonzero.</p>
<p>The decoded information for the selected GRIB field is returned in a derived type variable, gfld, which is of type <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>. Users of this routine will need to include the line "use grib_mod" in their calling routine.</p>
<p>Derived type <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a> contains pointers to many arrays of data. Users must free this memory by calling <a class="el" href="gf__free_8F90.html#a027efd02c99c9464153fc76d9bb9627e" title="Free memory that was used to store array values in derived type grib_mod::gribfield.">gf_free()</a>.</p>
<p>This subroutine calls <a class="el" href="getidx_8F90.html#a681cc6ee1b2c79c57285604831ce95dd" title="Find, read or generate a GRIB2 index for the GRIB2 file associated with unit lugb.">getidx()</a>, which allocates memory and stores the resulting pointers in an array that is a Fortran "save" variable. The result is that the memory will not be freed by the library and cannot be reached by the caller. To free this memory call <a class="el" href="getidx_8F90.html#ac02dafd6109baa69a66dc278d6b0c083" title="Free all memory associated with the library.">gf_finalize()</a> after all library operations are complete.</p>
<dl class="section note"><dt>Note</dt><dd>Specify an index file if feasible to increase speed. Do not engage the same logical unit from more than one processor. Note that derived type gribfield contains pointers to many arrays of data. The memory for these arrays is allocated when the values in the arrays are set, to help minimize problems with array overloading. Because of this users should free this memory, when it is no longer needed, by a call to subroutine <a class="el" href="gf__free_8F90.html#a027efd02c99c9464153fc76d9bb9627e" title="Free memory that was used to store array values in derived type grib_mod::gribfield.">gf_free()</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">LUGB</td><td>integer unit of the unblocked grib data file. File must be opened with <a href="https://noaa-emc.github.io/NCEPLIBS-bacio/">baopen() or baopenr()</a> before calling this routine. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">LUGI</td><td>integer unit of the unblocked grib index file. If nonzero, file must be opened with <a href="https://noaa-emc.github.io/NCEPLIBS-bacio/">baopen() or baopenr()</a> before calling this routine.<ul>
<li>&gt;0 read index from index file lugi, if index doesn"t already exist.</li>
<li>=0 to get index buffer from the grib file, if index doesn"t already exist.</li>
<li>&lt;0 force reread of index from index file abs(lugi).</li>
<li>=lugb force regeneration of index from grib2 file lugb. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">J</td><td>integer number of fields to skip (=0 to search from beginning) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">JDISC</td><td>grib2 discipline number of requested field (if = -1, accept any discipline see code table 0.0)<ul>
<li>0 meteorological products</li>
<li>1 hydrological products</li>
<li>2 land surface products</li>
<li>3 space products</li>
<li>10 oceanographic products </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">JIDS</td><td>integer array of values in the identification section (=-9999 for wildcard)<ul>
<li>JIDS(1) identification of originating centre (see common code table c-1)</li>
<li>JIDS(2) identification of originating sub-centre</li>
<li>JIDS(3) grib master tables version number (see code table 1.0) 0 experimental;1 initial operational version number.</li>
<li>JIDS(4) grib local tables version number (see code table 1.1) 0 local tables not used; 1-254 number of local tables version used.</li>
<li>JIDS(5) significance of reference time (code table 1.2) 0 analysis; 1 start of forecast; 2 verifying time of forecast; 3 observation time</li>
<li>JIDS(6) year (4 digits)</li>
<li>JIDS(7) month</li>
<li>JIDS(8) day</li>
<li>JIDS(9) hour</li>
<li>JIDS(10) minute</li>
<li>JIDS(11) second</li>
<li>JIDS(12) production status of processed data (see code table 1.3) 0 operational products; 1 operational test products; 2 research products; 3 re-analysis products.</li>
<li>JIDS(13) type of processed data (see code table 1.4) 0 analysis products; 1 forecast products; 2 analysis and forecast products; 3 control forecast products; 4 perturbed forecast products; 5 control and perturbed forecast products; 6 processed satellite observations; 7 processed radar observations. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">JPDTN</td><td>integer product definition template number (n) (if = -1, don't bother matching pdt - accept any) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">JPDT</td><td>integer array of values defining the product definition template 4.n of the field for which to search (=-9999 for wildcard) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">JGDTN</td><td>integer grid definition template number (m) (if = -1, don't bother matching gdt - accept any ) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">JGDT</td><td>integer array of values defining the grid definition template 3.m of the field for which to search (=-9999 for wildcard) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">UNPACK</td><td>logical value indicating whether to unpack bitmap/data<ul>
<li>.TRUE. unpack bitmap and data values</li>
<li>.FALSE. do not unpack bitmap and data values </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">K</td><td>integer field number unpacked </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">GFLD</td><td>derived type <a class="el" href="namespacegrib__mod.html#structgrib__mod_1_1gribfield">grib_mod::gribfield</a>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">IRET</td><td>integer return code<ul>
<li>0 all ok</li>
<li>96 error reading index</li>
<li>97 error reading grib file</li>
<li>99 request not found</li>
<li>other gf_getfld grib2 unpacker return code</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section author"><dt>Author</dt><dd>Mark Iredell </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1994-04-01 </dd></dl>

<p class="definition">Definition at line <a class="el" href="getgb2_8F90_source.html#l00112">112</a> of file <a class="el" href="getgb2_8F90_source.html">getgb2.F90</a>.</p>

<p class="reference">References <a class="el" href="getgb2l_8F90_source.html#l00037">getgb2l()</a>, <a class="el" href="getgb2r_8F90_source.html#l00040">getgb2r()</a>, <a class="el" href="getgb2s_8F90_source.html#l00080">getgb2s()</a>, <a class="el" href="getidx_8F90_source.html#l00044">getidx()</a>, and <a class="el" href="gf__free_8F90_source.html#l00012">gf_free()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="getgb2_8F90.html">getgb2.F90</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
