<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>NCEPLIBS-g2: getgb2p.f File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">NCEPLIBS-g2
   &#160;<span id="projectnumber">3.4.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Types&#160;List</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('getgb2p_8f.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">getgb2p.f File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This subroutine find and extracts a grib message from a file.  
<a href="#details">More...</a></p>

<p><a href="getgb2p_8f_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a12b440aa28985f8ea389adb7f065abe1"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="getgb2p_8f.html#a12b440aa28985f8ea389adb7f065abe1">getgb2p</a> (LUGB, LUGI, J, JDISC, JIDS, JPDTN, JPDT, JGDTN, JGDT, EXTRACT, K, GRIBM, LENG, IRET)</td></tr>
<tr class="memdesc:a12b440aa28985f8ea389adb7f065abe1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This subroutine find and extracts a grib message from a file.  <a href="#a12b440aa28985f8ea389adb7f065abe1">More...</a><br/></td></tr>
<tr class="separator:a12b440aa28985f8ea389adb7f065abe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This subroutine find and extracts a grib message from a file. </p>
<dl class="section author"><dt>Author</dt><dd>Mark Iredell </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1994-04-01 </dd></dl>

<p>Definition in file <a class="el" href="getgb2p_8f_source.html">getgb2p.f</a>.</p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a class="anchor" id="a12b440aa28985f8ea389adb7f065abe1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine getgb2p </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>LUGB</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>LUGI</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>J</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>JDISC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>JIDS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>JPDTN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>JPDT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>JGDTN</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(*)&#160;</td>
          <td class="paramname"><em>JGDT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>EXTRACT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>K</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=1), dimension(:), pointer&#160;</td>
          <td class="paramname"><em>GRIBM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>LENG</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>IRET</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This subroutine find and extracts a grib message from a file. </p>
<p>It reads a grib index file (or optionally the grib file itself) to get the index buffer (i.e. table of contents) for the grib file. find in the index buffer a reference to the grib field requested. the grib field request specifies the number of fields to skip and the unpacked identification section, grid definition template and product defintion section parameters. (a requested parameter of -9999 means to allow any value of this parameter to be found.) if the requested grib field is found, then it is read from the grib file and unpacked. If the grib field is not found, then the return code will be nonzero.</p>
<p>PROGRAM HISTORY LOG:</p>
<ul>
<li>1994-04-01 Mark Iredell</li>
<li>1995-10-31 Mark Iredell modularized portions of code into subprograms and allowed for unspecified index file</li>
<li>2002-01-11 Stephen Gilbert modified from getgb and getgbm to work with grib2</li>
<li>2003-12-17 Stephen Gilbert modified from getgb2 to return packed grib2 message <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">LUGB</td><td>integer unit of the unblocked grib data file. file must be opened with baopen or baopenr before calling this routine. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">LUGI</td><td>integer unit of the unblocked grib index file. if nonzero, file must be opened with baopen baopenr before calling this routine. (=0 to get index buffer from the grib file) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">J</td><td>integer number of fields to skip (=0 to search from beginning) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">JDISC</td><td>grib2 discipline number of requested field (if = -1, accept any discipline see code table 0.0)</td></tr>
  </table>
  </dd>
</dl>
</li>
<li>0 meteorological products</li>
<li>1 hydrological products</li>
<li>2 land surface products</li>
<li>3 space products</li>
<li>10 oceanographic products <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">JIDS</td><td>integer array of values in the identification section (=-9999 for wildcard)</td></tr>
  </table>
  </dd>
</dl>
</li>
<li>JIDS(1) identification of originating centre (see common code table c-1)</li>
<li>JIDS(2) identification of originating sub-centre</li>
<li>JIDS(3) grib master tables version number (see code table 1.0) 0 experimental;1 initial operational version number.</li>
<li>JIDS(4) grib local tables version number (see code table 1.1) 0 local tables not used; 1-254 number of local tables version used.</li>
<li>JIDS(5) significance of reference time (code table 1.2) 0 analysis; 1 start of forecast; 2 verifying time of forecast; 3 observation time</li>
<li>JIDS(6) year (4 digits)</li>
<li>JIDS(7) month</li>
<li>JIDS(8) day</li>
<li>JIDS(9) hour</li>
<li>JIDS(10) minute</li>
<li>JIDS(11) second</li>
<li>JIDS(12) production status of processed data (see code table 1.3) 0 operational products; 1 operational test products; 2 research products; 3 re-analysis products.</li>
<li>JIDS(13) type of processed data (see code table 1.4) 0 analysis products; 1 forecast products; 2 analysis and forecast products; 3 control forecast products; 4 perturbed forecast products; 5 control and perturbed forecast products; 6 processed satellite observations; 7 processed radar observations. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">JPDTN</td><td>integer product definition template number (n) (if = -1, don't bother matching pdt - accept any) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">JPDT</td><td>integer array of values defining the product definition template 4.n of the field for which to search (=-9999 for wildcard) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">JGDTN</td><td>integer grid definition template number (m) (if = -1, don't bother matching gdt - accept any ) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">JGDT</td><td>integer array of values defining the grid definition template 3.m of the field for which to search (=-9999 for wildcard) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">EXTRACT</td><td>logical value indicating whether to return a grib2 message with just the requested field, or the entire grib2 message containing the requested field.</td></tr>
  </table>
  </dd>
</dl>
</li>
<li>.true. = return grib2 message containing only the requested field.</li>
<li>.false. = return entire grib2 message containing the requested field. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">K</td><td>integer field number unpacked. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">GRIBM</td><td>returned grib message. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">LENG</td><td>length of returned grib message in bytes. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">IRET</td><td>integer return code</td></tr>
  </table>
  </dd>
</dl>
</li>
<li>0 all ok</li>
<li>96 error reading index</li>
<li>97 error reading grib file</li>
<li>99 request not found <dl class="section note"><dt>Note</dt><dd>specify an index file if feasible to increase speed. do not engage the same logical unit from more than one processor. Note that derived type gribfield contains pointers to many arrays of data. The memory for these arrays is allocated when the values in the arrays are set, to help minimize problems with array overloading. Because of this users are encouraged to free up this memory, when it is no longer needed, by an explicit call to subroutine gf_free.</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Mark Iredell </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1994-04-01 </dd></dl>
</li>
</ul>

<p>Definition at line <a class="el" href="getgb2p_8f_source.html#l00098">98</a> of file <a class="el" href="getgb2p_8f_source.html">getgb2p.f</a>.</p>

<p>References <a class="el" href="getg2i_8f_source.html#l00056">getg2i()</a>, <a class="el" href="getg2ir_8f_source.html#l00059">getg2ir()</a>, <a class="el" href="getgb2rp_8f_source.html#l00035">getgb2rp()</a>, <a class="el" href="getgb2s_8f_source.html#l00243">getgb2s()</a>, and <a class="el" href="gf__free_8f_source.html#l00138">gf_free()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_75b82e7e4a5feb05200b9ad7adf06257.html">home</a></li><li class="navelem"><a class="el" href="dir_b90aa5a6084b86bdb838378bc1dc161c.html">Hang.Lei</a></li><li class="navelem"><a class="el" href="dir_a172c4a69c8c4fc64ef5d9224f684072.html">noscrub</a></li><li class="navelem"><a class="el" href="dir_dd819178255f7a9ad49a3b8867a6c150.html">docus</a></li><li class="navelem"><a class="el" href="dir_648917924aeb9ce7c1fc0528dd2caf69.html">feature</a></li><li class="navelem"><a class="el" href="dir_d016ec1399c85acecef32bf81e1fad9c.html">dox</a></li><li class="navelem"><a class="el" href="dir_a7b3ebe721b8c60c479822a40383d337.html">src</a></li><li class="navelem"><a class="el" href="getgb2p_8f.html">getgb2p.f</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
